/* Zepto v1.0rc1 - polyfill zepto event detect fx ajax form touch - zeptojs.com/license */
function Config(){var e={},t="m";return window.location.host=="localhost"||window.location.host.match(".*\\waptest\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")?t="waptest":window.location.host.match(".*\\wapa\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")?t="wapa":window.location.host.match(".*\\m\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")&&(t="m"),e.sysType=t||"m",e.indexPage="http://fav."+e.sysType+".taobao.com/h5proxy-midFav.htm",e.errorPage="http://fav."+e.sysType+".taobao.com/fav_error.htm",e}function h5Cookie(){var e={};return e.isCookieEnable=function(){if(!window.navigator.cookieEnabled)return!1;var e="_s_cookie_";this.setCookie(e,"1");var t=this.getCookie(e);return t=="1"?(this.delCookie(e),!0):!1},e.getCookieVal=function(e){var t=document.cookie.indexOf(";",e);return t==-1&&(t=document.cookie.length),unescape(document.cookie.substring(e,t))},e.getCookie=function(e){var t=e+"=",n=t.length,r=document.cookie.length,i=0;while(i<r){var s=i+n;if(document.cookie.substring(i,s)==t)return this.getCookieVal(s);i=document.cookie.indexOf(" ",i)+1;if(i==0)break}return null},e.setCookie=function(e,t){var n=window.location.host,r=n.indexOf("."),i=n.substring(0,r);i!="waptest"&&i!="wapa"&&i!="m"&&(n.indexOf("taobao")>-1||n.indexOf("tmall")>-1)&&(n=n.substr(r+1));var s=arguments.length>2?arguments[2]:null;if(s==null)document.cookie=e+"="+escape(t)+";path=/;domain="+n;else{var o=new Date;o.setTime(o.getTime()+s*1e3),document.cookie=e+"="+escape(t)+";path=/;domain="+n+";expires="+o.toGMTString()}},e.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var n=this.getCookie(e);document.cookie=e+"="+n+"; expires="+t.toGMTString()},e}function h5_utils(){var e={};return e.isBlank=function(e){return e==null||typeof e=="undefined"||$.trim(e)==""?!0:!1},e.wrapColsure=function(e){return $.each(e,function(t){typeof e[t]=="function"&&(e[t]=_.bind(e[t],e))}),e},e.MD5=function(e){function t(e,t){return e<<t|e>>>32-t}function n(e,t){var n,r,i,s,o;return i=e&2147483648,s=t&2147483648,n=e&1073741824,r=t&1073741824,o=(e&1073741823)+(t&1073741823),n&r?o^2147483648^i^s:n|r?o&1073741824?o^3221225472^i^s:o^1073741824^i^s:o^i^s}function r(e,t,n){return e&t|~e&n}function i(e,t,n){return e&n|t&~n}function s(e,t,n){return e^t^n}function o(e,t,n){return t^(e|~n)}function u(e,i,s,o,u,a,f){return e=n(e,n(n(r(i,s,o),u),f)),n(t(e,a),i)}function a(e,r,s,o,u,a,f){return e=n(e,n(n(i(r,s,o),u),f)),n(t(e,a),r)}function f(e,r,i,o,u,a,f){return e=n(e,n(n(s(r,i,o),u),f)),n(t(e,a),r)}function l(e,r,i,s,u,a,f){return e=n(e,n(n(o(r,i,s),u),f)),n(t(e,a),r)}function c(e){var t,n=e.length,r=n+8,i=(r-r%64)/64,s=(i+1)*16,o=Array(s-1),u=0,a=0;while(a<n)t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|e.charCodeAt(a)<<u,a++;return t=(a-a%4)/4,u=a%4*8,o[t]=o[t]|128<<u,o[s-2]=n<<3,o[s-1]=n>>>29,o}function h(e){var t="",n="",r,i;for(i=0;i<=3;i++)r=e>>>i*8&255,n="0"+r.toString(16),t+=n.substr(n.length-2,2);return t}function p(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t}var d=Array(),v,m,g,y,b,w,E,S,x,T=7,N=12,C=17,k=22,L=5,A=9,O=14,M=20,_=4,D=11,P=16,H=23,B=6,j=10,F=15,I=21;e=p(e),d=c(e),w=1732584193,E=4023233417,S=2562383102,x=271733878;for(v=0;v<d.length;v+=16)m=w,g=E,y=S,b=x,w=u(w,E,S,x,d[v+0],T,3614090360),x=u(x,w,E,S,d[v+1],N,3905402710),S=u(S,x,w,E,d[v+2],C,606105819),E=u(E,S,x,w,d[v+3],k,3250441966),w=u(w,E,S,x,d[v+4],T,4118548399),x=u(x,w,E,S,d[v+5],N,1200080426),S=u(S,x,w,E,d[v+6],C,2821735955),E=u(E,S,x,w,d[v+7],k,4249261313),w=u(w,E,S,x,d[v+8],T,1770035416),x=u(x,w,E,S,d[v+9],N,2336552879),S=u(S,x,w,E,d[v+10],C,4294925233),E=u(E,S,x,w,d[v+11],k,2304563134),w=u(w,E,S,x,d[v+12],T,1804603682),x=u(x,w,E,S,d[v+13],N,4254626195),S=u(S,x,w,E,d[v+14],C,2792965006),E=u(E,S,x,w,d[v+15],k,1236535329),w=a(w,E,S,x,d[v+1],L,4129170786),x=a(x,w,E,S,d[v+6],A,3225465664),S=a(S,x,w,E,d[v+11],O,643717713),E=a(E,S,x,w,d[v+0],M,3921069994),w=a(w,E,S,x,d[v+5],L,3593408605),x=a(x,w,E,S,d[v+10],A,38016083),S=a(S,x,w,E,d[v+15],O,3634488961),E=a(E,S,x,w,d[v+4],M,3889429448),w=a(w,E,S,x,d[v+9],L,568446438),x=a(x,w,E,S,d[v+14],A,3275163606),S=a(S,x,w,E,d[v+3],O,4107603335),E=a(E,S,x,w,d[v+8],M,1163531501),w=a(w,E,S,x,d[v+13],L,2850285829),x=a(x,w,E,S,d[v+2],A,4243563512),S=a(S,x,w,E,d[v+7],O,1735328473),E=a(E,S,x,w,d[v+12],M,2368359562),w=f(w,E,S,x,d[v+5],_,4294588738),x=f(x,w,E,S,d[v+8],D,2272392833),S=f(S,x,w,E,d[v+11],P,1839030562),E=f(E,S,x,w,d[v+14],H,4259657740),w=f(w,E,S,x,d[v+1],_,2763975236),x=f(x,w,E,S,d[v+4],D,1272893353),S=f(S,x,w,E,d[v+7],P,4139469664),E=f(E,S,x,w,d[v+10],H,3200236656),w=f(w,E,S,x,d[v+13],_,681279174),x=f(x,w,E,S,d[v+0],D,3936430074),S=f(S,x,w,E,d[v+3],P,3572445317),E=f(E,S,x,w,d[v+6],H,76029189),w=f(w,E,S,x,d[v+9],_,3654602809),x=f(x,w,E,S,d[v+12],D,3873151461),S=f(S,x,w,E,d[v+15],P,530742520),E=f(E,S,x,w,d[v+2],H,3299628645),w=l(w,E,S,x,d[v+0],B,4096336452),x=l(x,w,E,S,d[v+7],j,1126891415),S=l(S,x,w,E,d[v+14],F,2878612391),E=l(E,S,x,w,d[v+5],I,4237533241),w=l(w,E,S,x,d[v+12],B,1700485571),x=l(x,w,E,S,d[v+3],j,2399980690),S=l(S,x,w,E,d[v+10],F,4293915773),E=l(E,S,x,w,d[v+1],I,2240044497),w=l(w,E,S,x,d[v+8],B,1873313359),x=l(x,w,E,S,d[v+15],j,4264355552),S=l(S,x,w,E,d[v+6],F,2734768916),E=l(E,S,x,w,d[v+13],I,1309151649),w=l(w,E,S,x,d[v+4],B,4149444226),x=l(x,w,E,S,d[v+11],j,3174756917),S=l(S,x,w,E,d[v+2],F,718787259),E=l(E,S,x,w,d[v+9],I,3951481745),w=n(w,m),E=n(E,g),S=n(S,y),x=n(x,b);var q=h(w)+h(E)+h(S)+h(x);return q.toLowerCase()},e}function h5Uri(){function c(e){if(null!=n.ttQueryStr&&""!=n.ttQueryStr){var t=e.match("\\.[a-zA-Z]+\\?");null!=t&&0<t.length?e.indexOf("?")==e.length-1?e+=n.ttQueryStr:e=e+"&"+n.ttQueryStr:e=e+"?"+n.ttQueryStr}return e}function h(e,t,n,r){d(r)||(e+="/"+r),d(t)||(e+="/"+t);var i=!1;if(null!=n)for(var s in n)if(null!=n[s]){i=!0;break}return i&&(e+="?"+m(n)),e}function p(e){if(d(e))return!1;for(var t=0;t<r.length;t++)if(r[t].toLowerCase()==e.toLowerCase())return!0;return!1}function d(e){return t.checkIsBlank(e)}function v(e,t){return e.replace(s,function(){return p(t)?t:n.uri.defaultDomain})}function m(e){var t="";if(null==e)return t;for(var n in e)null!=e[n]&&""!=e[n]&&(t+=n+"="+encodeURIComponent(e[n])+"&");return""!=t&&t.length-1==t.lastIndexOf("&")&&(t=t.substr(0,t.length-1)),t}var e=Config(),t=h5_base(),n={};n.uri={protocol:"http://",sysType:e.sysType||"m",defaultDomain:"taobao"};var r=["taobao","tmall","etao","alibaba","alipay"],s="${_serverDomain}",o=["ttid","sprefer"];n._serverHost=n.uri.sysType+"."+s+".com",n.subUri={index:n.uri.protocol+n._serverHost},n.ttQueryStr="";try{var u=JSON.parse(t.get(t.paramKey)||"{}")||{};u.ttid&&""!=u.ttid&&(n.ttQueryStr+="&ttid="+u.ttid);for(i in o){var a=o[i],f=t.getQueryString(a);f&&f!=""&&(n.ttQueryStr+="&"+a+"="+f)}}catch(l){}return n.renderURI=function(e,t,n,r,i){return c(h(v(e,i),t,n,r))},n.renderDomain=function(e,t,r,i){return c(h(v(n.subUri.index,i),e,t,r))},n.renderServer=function(e,t,n,r){return c(h(r,e,t,n))},n.encode=function(e){return encodeURI(e)},n.getStrParamFromJson=function(e){return m(e)},n.createURI=function(e){return e==="home"?n.uri.protocol+n._serverHost:n.uri.protocol+e+"."+n._serverHost},n}function uriBroker(){function r(e){if(URL_CONSTANTS.path[e])return URL_CONSTANTS.path[e];var t=e.lastIndexOf("_");return t<0?"":r(e.substring(0,t))}function i(e,t){return e==URL_CONSTANTS.path["a"]&&(e=e.replace("ITEM_ID",function(){var e=t.itemId;return delete t.itemId,e})),e==URL_CONSTANTS.path["a_td"]&&(e=e.replace("ORDER_ID",function(){var e=t.tradeId;return delete t.tradeId,e})),e||""}function s(e){var t=URL_CONSTANTS.dps[e];if(_.isString(t))return t;if(_.isObject(t)){var n=t.cache;if(t.dps)return URL_CONSTANTS[n]=t.dps,t.dps;if(n)return URL_CONSTANTS[n]}return!e||e.lastIndexOf("_")<0?"":(e=e.substring(0,e.lastIndexOf("_")),s(e))}var e=h5Uri(),t=h5_base(),n={};return n.URL_CONSTANTS=URL_CONSTANTS={path:{home:"index.htm",home_wuliu:"trade/bought_item_lists.htm",home_kehu:"channel/act/other/kehufuwu.xhtml",home_anquan:"channel/act/other/jiaoyianquan.xhtml",home_tiantiantejia:"channel/act/sale/tiantiantejia.html",home_taojinbi:"channel/act/taojinbi.html",home_help:"channel/act/other/help.xhtml",home_msg:"index_header_ajax.htm",my:"myTaobao.htm",my_deliver:"deliver/wap_deliver_address_list.htm",my_alipay:"myAlipay.htm",my_bindalipay:"alipay_modify.htm",my_viewitems:"view_items.htm",a:"iITEM_ID.htm",a_td:"tdORDER_ID.htm",s:"search.htm",s_history:"history.htm",im:"ww/ad_ww_lately_contacts.htm",im_icon:"ww/status.do",shop:"shop/shop_index.htm",shop_search:"shop/shop_auction_search.htm",login:"login.htm",login_out:"logout.htm",u_reg:"reg/newUser.htm",fav:"h5proxy-mid_fav.htm",auction1_cart:"cart/my_cart.htm",info_jianyi:"help/report.htm",h5_ww:"ww/index.htm",h5_myhome:"my/index.htm",h5_allspark:"we/index.htm",h5_mycart:"cart/index.htm",d:"my_bag.htm",triph5_order:"myorder.html",caipiao_order:"lottery/wap/user/my_lottery.htm",tm_pay:"order/baobeiPay.htm",auction1_refund:"refund/fill_refund.htm",tm_cancelOrder:"order/order_cancel.htm"},dps:{},app_param_key:t.paramKey},n.getUrl=function(t,n){t=t.toLowerCase(),n=n||{};var s=n.domain;s?delete n.domain:s="taobao";var o=t.split("_"),u=e.createURI(o[0]);if(!u)throw"module param is not current,can't match any host";var a="",f=_getDps(t,n);switch(o[0]){case"api":var l={};l.data=JSON.stringify(n),_.extend(l,this.defaultMtopParam),n=l,a=r(t);break;default:a=r(t),a=i(a,n)}return f&&(n.pds=f),e.renderURI(u,"",n,a,s)},n.getDps=_getDps=function(e,t){if(t.dps)return t.dps;var n=e,r=t.method;return r&&(n+="_"+r.toLowerCase()),t._3th&&(n+="_3th",delete t._3th),t.trigerType&&(n+="_"+t.trigerType,delete t.trigerType),s(n)},n}function ModePop(e){this._options=$.extend({mode:"msg",text:"网页提示",useTap:!1},e||{}),this._init()}function h5_common(){var e={},t=uriBroker(),n=h5_base(),r=h5Cookie(),i=function(e){var n=t.getUrl(e);window.location.href=t.getUrl("login",{tpl_redirect_url:n})},s=function(e){e&&e!="undefined"&&(window.location.href=t.getUrl(e)),window.location.href="http://m.taobao.com"};e.dealResponse=function(e,t,r,u,a,f){var l=e.ret.toString().toUpperCase();l.indexOf("SUCCESS::")>-1?t(e):(n.set(n.hrefHash,window.location.hash),l.indexOf("FAIL_SYS_SESSION_EXPIRED")>-1||l.indexOf("NEED_LOGIN::")>-1||l.indexOf("-100::")>-1||l.indexOf("NOT_FOUNT_USER::")>-1||l.indexOf("ERR_SID_INVALID::")>-1||l.indexOf("SID_ERROR::")>-1?u?i(u):i("home"):l.indexOf("ILLEGAL_REQUEST::")>-1||l.indexOf("ILLEGAL_SIGN::")>-1?o()?r&&r(f?e:l):s(a):r&&r(f?e:l))};var o=function(){var e=parseInt(n.get(n.appRequestFailed)||"0");return 3<=e?(window.location.href="http://m.taobao.com?t=3",!0):(e+=1,n.set(n.appRequestFailed,e),!1)};return e.isSupportH5=function(){return window.localStorage=="undefined"?!1:window.applicationCache=="undefined"?!1:!0},e.getNickFromCookie=function(){var e=r.getCookie("_w_tb_nick");return e&&e.length>2&&e!="null"?e:""},e.getNickFromHidden=function(){var e=$("#J_user_nick").val();return e?e:""},e.isLogin=function(){var e=r.getCookie("imewweoriw");return e&&decodeURIComponent(e).length>32},e.goLogin=function(e){e=e||"home",i(e)},e.isSuppWebp=function(){return"true"==r.getCookie("supportWebp")},e}function h5_base(){function t(e){var t=Array.prototype.slice.call(arguments,1);for(var n=0,r=t.length;n<r;n++)for(var i in t[n])e[i]=t[n][i];return e}var e={};return e.paramKey="h5_paramKey",e.targetUrl="h5_targetUrl",e.userInfoKey="h5_userInfoKey",e.hrefHash="_hash",e.lastHash="_lastHash",e.appKey="h5_app_key",e.appToken="h5_app_token",e.appRefreshToken="h5_app_ref_token",e.appTokenExpired="h5_app_token_expired",e.appTokenBetween="h5_app_token_between",e.appTokenSaveTime="h5_app_token_save_time",e.appRequestFailed="h5_app_request_failed_tag",e.set=function(e,t){if(this.isSuppLocalStorage()){typeof t!="string"&&(t=JSON.stringify(t));try{return window.localStorage.setItem(e,t),!0}catch(n){}}return!1},e.add=function(e,n){if(this.isSuppLocalStorage()){if(typeof n=="string")n=JSON.parse(n);else{try{t(n,JSON.parse(getValue(e)))}catch(r){}n=JSON.stringify(n)}return window.localStorage.setItem(e,n),!0}return!1},e.get=getValue=function(e){return this.isSuppLocalStorage()?window.localStorage.getItem(e):null},e.removeValue=function(e){if(this.isSuppLocalStorage())return window.localStorage.removeItem(e)},e.clearAll=function(){if(this.isSuppLocalStorage())return window.localStorage.clear()},e.userCacheHash=function(e){var t=e||"h5",n=t+this.lastHash,r=t+this.hrefHash;return!location.hash&&this.get(r)?(location.hash=this.get(r),!0):(location.hash&&(this.get(r)!=location.hash&&this.set(n,this.get(r)||""),this.set(r,location.hash)),!1)},e.getLastHash=function(e,t){return this.get((e||"h5")+this.lastHash)||t||""},e.getParamFromStorage=function(e){try{return JSON.parse(this.get(this.paramKey))[e]}catch(t){}return null},e.getUserProFromStorage=function(e){try{return JSON.parse(this.get(this.userInfoKey))[e]}catch(t){}return null},e.getBetweenTime=function(e){if(e){var t=(new Date).getTime()-e;return this.set(this.appTokenBetween,t),t}return parseInt(this.get(this.appTokenBetween)||0)},e.checkIsBlank=function(e){return null==e||""==e},e.isLogin=function(){var e=this.getUserProFromStorage("nick");return e==""||e==null?!1:!0},e.removeToken=function(){try{this.removeValue(this.appToken),this.removeValue(this.appRefreshToken),this.removeValue(this.appTokenExpired),this.removeValue(this.appTokenBetween),this.removeValue(this.appTokenSaveTime)}catch(e){}},e.getQueryString=function(e){var t=location.search;if(t.length<1)return"";t=t.substr(1);var n=t.split("&"),r={};for(i in n){var s=n[i].split("=");r[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e?r[e]:r},e.isClient=function(){var e=this.getQueryString("ttid");return e&&e.indexOf("@")>-1},e.isAndroidClient=function(){var e=this.getQueryString("ttid");return e&&e.toLowerCase().indexOf("android")>-1},e.isSuppLocalStorage=function(){try{if(window.localStorage=="undefined")return!1;var e="testSupportKey";window.localStorage.setItem(e,"1");var t=window.localStorage.getItem(e);return window.localStorage.removeItem(e),"1"==t}catch(n){}return!1},e}function mtop_h5_chunk(){var e=h5_common(),t={},n;return t.isXhr2=function(){return undefined===n&&(n=$.ajaxSettings.xhr().upload),n},t.appPath=undefined,t.chunkAjax=function(n,r){var i=$.extend({},n||{});for(key in $.ajaxSettings)i[key]===undefined&&(i[key]=$.ajaxSettings[key]);var s=$.ajaxSettings.xhr(),o,u=function(){s.abort(),o&&clearTimeout(o)},a=0,f=!1,l=function(n){if(f)return;var r=n.substr(a),o=r.search(/\d+/);if(o<0)return;var c=r.match(/\d+/)[0],h=c.length+parseInt(c)+o;if(r.length>=h){f=!0;var p=r.substr(c.length+o,parseInt(c)),d,v;try{d=JSON.parse(p)}catch(m){v=m}var g=i.context;v?(u(),i.error.call(this,v)):e.dealResponse(d,function(e){i.success.call(g,e)},function(e){i.error.call(this,e)},t.appPath,"",!0),a+=h,f=!1}s.responseText.length>=a&&l(s.responseText)};if(!s.upload)return console.log("un support xhr2"),!1;s.onreadystatechange=function(){s.readyState==4?s.status>=200&&s.status<300||s.status==304?l(s.responseText,!0):u():s.readyState==3&&l(s.responseText)},s.open(i.type,i.url,!0);for(name in i.headers)s.setRequestHeader(name,i.headers[name]);return i.timeout>0&&(o=setTimeout(function(){s.onreadystatechange=function(){},s.abort()},i.timeout)),s.send(i.data?i.data:null),s},t}function mtop_h5api(){function y(e){return e.indexOf("bigPipe.do?")>0}var e={},t=h5Cookie(),n=h5_utils(),r=h5_base(),i=h5Uri(),s="J_app_key",o="h5ApiUpdate.do",u="_m_h5_tk",a=mtop_h5_chunk(),f="bigPipe.do",l=0,c=5,h=!1;callQue=[],e.getApi=function(e,t,n,u,a,l){var c=n&&!!n.apis;c?(u.entrance="h5",u.apis=typeof n.apis=="string"?n.apis:JSON.stringify(n.apis)):(u.api=e,u.v=t||"*",u.data=typeof n=="string"?n:JSON.stringify(n));var p=i.renderURI(i.createURI("api"),c?f:o,u,"rest"),v=r.getQueryString("ttid");v&&v.indexOf("@")==-1?p=p.replace(/ttid=[^&]+/,"ttid=taobao_h5_1.0.0"):v||(p+="&ttid=taobao_h5_1.0.0"),0==p.indexOf("http://api.m.taobao.com"&&c)&&(p=p.replace("taobao.com","taobao.com:9999"));var m=document.getElementById(s).value;callQue.push({url:p,app_key:m,data:u.data,callback:a,errorback:l}),h||(h=!0,d())};var p=function(e,n,r,i,s){var o=(t.getCookie(u)||"").split("_")[0],f=v(e,n,o,r),h={type:"GET",url:f,timeout:2e4,success:function(o){var a=(o.ret?o.ret:"").toString();if(-1!=a.indexOf("SUCCESS::"))l=0;else if(-1!=a.indexOf("TOKEN_EMPTY::")||-1!=a.indexOf("TOKEN_EXOIRED::")){if(l<c){p(e,n,r,i,s);return}t.delCookie(u),console.log("try exceed times")}i&&i(o),d()},error:function(e){s&&s(e),d()},complete:function(e,t){t!="success"&&s&&s(t),d()}};y(e)?a.chunkAjax(h):$.ajax(h)},d=function(){if(callQue.length>0){var e=callQue.pop(0);p(e.url,e.app_key,e.data,e.callback,e.errorback)}else h=!1},v=function(e,t,n,r){var i=(new Date).getTime();return m(e)+"&appKey="+t+"&sign="+g(t,n,i,r)+"&t="+i},m=function(e){if(-1==e.indexOf("callback=")&&!y(e)){var t=e.indexOf("?");return e.substr(0,t)+"?callback=?&type=jsonp&"+e.substr(t+1,e.length)}return e},g=function(e,t,r,i){var s=t+"&"+r+"&"+e+"&"+i;return s=n.MD5(s),s};return e.addApi=function(t,n,r,i,s,o){var u={apis:[{api:t,v:n,data:r}],succ:{},error:{},addApi:function(e,t,n,r,i,s){return this.apis.push({api:e,v:t,data:n}),this.succ[e]=i,this.error[e]=s,this},execute:function(t){function n(t){e.getApi(t.api,t.v,t.data,{},this.succ[t.api],this.error[t.api])}if(t&&a.isXhr2())if(1==this.apis.length)n.call(this,this.apis[0]);else{var r=this;e.getApi("","",{apis:r.apis},{},function(e){e.api&&r.error[e.api]&&r.error[e.api].call(this,e)},function(e){e.api&&r.error[e.api]&&r.error[e.api].call(this,e)})}else{var r=this;this.apis.forEach(function(e){n.call(r,e)})}}};return u.succ[t]=s,u.error[t]=o,u},e}(function(e){String.prototype.trim===e&&(String.prototype.trim=function(){return this.replace(/^\s+/,"").replace(/\s+$/,"")}),Array.prototype.reduce===e&&(Array.prototype.reduce=function(t){if(this===void 0||this===null)throw new TypeError;var n=Object(this),r=n.length>>>0,i=0,s;if(typeof t!="function")throw new TypeError;if(r==0&&arguments.length==1)throw new TypeError;if(arguments.length>=2)s=arguments[1];else do{if(i in n){s=n[i++];break}if(++i>=r)throw new TypeError}while(!0);while(i<r)i in n&&(s=t.call(e,s,n[i],i,n)),i++;return s})})();var Zepto=function(){function C(e){return E.call(e)=="[object Function]"}function k(e){return e instanceof Object}function L(t){var n,r;if(E.call(t)!=="[object Object]")return!1;r=C(t.constructor)&&t.constructor.prototype;if(!r||!hasOwnProperty.call(r,"isPrototypeOf"))return!1;for(n in t);return n===e||hasOwnProperty.call(t,n)}function A(e){return e instanceof Array}function O(e){return typeof e.length=="number"}function M(t){return t.filter(function(t){return t!==e&&t!==null})}function _(e){return e.length>0?[].concat.apply([],e):e}function D(e){return e.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()}function P(e){return e in a?a[e]:a[e]=new RegExp("(^|\\s)"+e+"(\\s|$)")}function H(e,t){return typeof t=="number"&&!l[D(e)]?t+"px":t}function B(e){var t,n;return u[e]||(t=o.createElement(e),o.body.appendChild(t),n=f(t,"").getPropertyValue("display"),t.parentNode.removeChild(t),n=="none"&&(n="block"),u[e]=n),u[e]}function j(t,r){return r===e?n(t):n(t).filter(r)}function F(e,t,n,r){return C(t)?t.call(e,n,r):t}function I(e,t,r){var i=e%2?t:t.parentNode;i?i.insertBefore(r,e?e==1?i.firstChild:e==2?t:null:t.nextSibling):n(r).remove()}function q(e,t){t(e);for(var n in e.childNodes)q(e.childNodes[n],t)}var e,t,n,r,i=[],s=i.slice,o=window.document,u={},a={},f=o.defaultView.getComputedStyle,l={"column-count":1,columns:1,"font-weight":1,"line-height":1,opacity:1,"z-index":1,zoom:1},c=/^\s*<(\w+|!)[^>]*>/,h=[1,3,8,9,11],p=["after","prepend","before","append"],d=o.createElement("table"),v=o.createElement("tr"),m={tr:o.createElement("tbody"),tbody:d,thead:d,tfoot:d,td:v,th:v,"*":o.createElement("div")},g=/complete|loaded|interactive/,y=/^\.([\w-]+)$/,b=/^#([\w-]+)$/,w=/^[\w-]+$/,E={}.toString,S={},x,T,N=o.createElement("div");return S.matches=function(e,t){if(!e||e.nodeType!==1)return!1;var n=e.webkitMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.matchesSelector;if(n)return n.call(e,t);var r,i=e.parentNode,s=!i;return s&&(i=N).appendChild(e),r=~S.qsa(i,t).indexOf(e),s&&N.removeChild(e),r},x=function(e){return e.replace(/-+(.)?/g,function(e,t){return t?t.toUpperCase():""})},T=function(e){return e.filter(function(t,n){return e.indexOf(t)==n})},S.fragment=function(t,r){r===e&&(r=c.test(t)&&RegExp.$1),r in m||(r="*");var i=m[r];return i.innerHTML=""+t,n.each(s.call(i.childNodes),function(){i.removeChild(this)})},S.Z=function(e,t){return e=e||[],e.__proto__=arguments.callee.prototype,e.selector=t||"",e},S.isZ=function(e){return e instanceof S.Z},S.init=function(t,r){if(!t)return S.Z();if(C(t))return n(o).ready(t);if(S.isZ(t))return t;var i;if(A(t))i=M(t);else if(L(t))i=[n.extend({},t)],t=null;else if(h.indexOf(t.nodeType)>=0||t===window)i=[t],t=null;else if(c.test(t))i=S.fragment(t.trim(),RegExp.$1),t=null;else{if(r!==e)return n(r).find(t);i=S.qsa(o,t)}return S.Z(i,t)},n=function(e,t){return S.init(e,t)},n.extend=function(n){return s.call(arguments,1).forEach(function(r){for(t in r)r[t]!==e&&(n[t]=r[t])}),n},S.qsa=function(e,t){var n;return e===o&&b.test(t)?(n=e.getElementById(RegExp.$1))?[n]:i:e.nodeType!==1&&e.nodeType!==9?i:s.call(y.test(t)?e.getElementsByClassName(RegExp.$1):w.test(t)?e.getElementsByTagName(t):e.querySelectorAll(t))},n.isFunction=C,n.isObject=k,n.isArray=A,n.isPlainObject=L,n.inArray=function(e,t,n){return i.indexOf.call(t,e,n)},n.trim=function(e){return e.trim()},n.uuid=0,n.map=function(e,t){var n,r=[],i,s;if(O(e))for(i=0;i<e.length;i++)n=t(e[i],i),n!=null&&r.push(n);else for(s in e)n=t(e[s],s),n!=null&&r.push(n);return _(r)},n.each=function(e,t){var n,r;if(O(e)){for(n=0;n<e.length;n++)if(t.call(e[n],n,e[n])===!1)return e}else for(r in e)if(t.call(e[r],r,e[r])===!1)return e;return e},n.fn={forEach:i.forEach,reduce:i.reduce,push:i.push,indexOf:i.indexOf,concat:i.concat,map:function(e){return n.map(this,function(t,n){return e.call(t,n,t)})},slice:function(){return n(s.apply(this,arguments))},ready:function(e){return g.test(o.readyState)?e(n):o.addEventListener("DOMContentLoaded",function(){e(n)},!1),this},get:function(t){return t===e?s.call(this):this[t]},toArray:function(){return this.get()},size:function(){return this.length},remove:function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})},each:function(e){return this.forEach(function(t,n){e.call(t,n,t)}),this},filter:function(e){return n([].filter.call(this,function(t){return S.matches(t,e)}))},add:function(e,t){return n(T(this.concat(n(e,t))))},is:function(e){return this.length>0&&S.matches(this[0],e)},not:function(t){var r=[];if(C(t)&&t.call!==e)this.each(function(e){t.call(this,e)||r.push(this)});else{var i=typeof t=="string"?this.filter(t):O(t)&&C(t.item)?s.call(t):n(t);this.forEach(function(e){i.indexOf(e)<0&&r.push(e)})}return n(r)},eq:function(e){return e===-1?this.slice(e):this.slice(e,+e+1)},first:function(){var e=this[0];return e&&!k(e)?e:n(e)},last:function(){var e=this[this.length-1];return e&&!k(e)?e:n(e)},find:function(e){var t;return this.length==1?t=S.qsa(this[0],e):t=this.map(function(){return S.qsa(this,e)}),n(t)},closest:function(e,t){var r=this[0];while(r&&!S.matches(r,e))r=r!==t&&r!==o&&r.parentNode;return n(r)},parents:function(e){var t=[],r=this;while(r.length>0)r=n.map(r,function(e){if((e=e.parentNode)&&e!==o&&t.indexOf(e)<0)return t.push(e),e});return j(t,e)},parent:function(e){return j(T(this.pluck("parentNode")),e)},children:function(e){return j(this.map(function(){return s.call(this.children)}),e)},siblings:function(e){return j(this.map(function(e,t){return s.call(t.parentNode.children).filter(function(e){return e!==t})}),e)},empty:function(){return this.each(function(){this.innerHTML=""})},pluck:function(e){return this.map(function(){return this[e]})},show:function(){return this.each(function(){this.style.display=="none"&&(this.style.display=null),f(this,"").getPropertyValue("display")=="none"&&(this.style.display=B(this.nodeName))})},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return this.each(function(){n(this).wrapAll(n(e)[0].cloneNode(!1))})},wrapAll:function(e){return this[0]&&(n(this[0]).before(e=n(e)),e.append(this)),this},unwrap:function(){return this.parent().each(function(){n(this).replaceWith(n(this).children())}),this},clone:function(){return n(this.map(function(){return this.cloneNode(!0)}))},hide:function(){return this.css("display","none")},toggle:function(t){return(t===e?this.css("display")=="none":t)?this.show():this.hide()},prev:function(){return n(this.pluck("previousElementSibling"))},next:function(){return n(this.pluck("nextElementSibling"))},html:function(t){return t===e?this.length>0?this[0].innerHTML:null:this.each(function(e){var r=this.innerHTML;n(this).empty().append(F(this,t,e,r))})},text:function(t){return t===e?this.length>0?this[0].textContent:null:this.each(function(){this.textContent=t})},attr:function(n,r){var i;return typeof n=="string"&&r===e?this.length==0||this[0].nodeType!==1?e:n=="value"&&this[0].nodeName=="INPUT"?this.val():!(i=this[0].getAttribute(n))&&n in this[0]?this[0][n]:i:this.each(function(e){if(this.nodeType!==1)return;if(k(n))for(t in n)this.setAttribute(t,n[t]);else this.setAttribute(n,F(this,r,e,this.getAttribute(n)))})},removeAttr:function(e){return this.each(function(){this.nodeType===1&&this.removeAttribute(e)})},prop:function(t,n){return n===e?this[0]?this[0][t]:e:this.each(function(e){this[t]=F(this,n,e,this[t])})},data:function(t,n){var r=this.attr("data-"+D(t),n);return r!==null?r:e},val:function(t){return t===e?this.length>0?this[0].value:e:this.each(function(e){this.value=F(this,t,e,this.value)})},offset:function(){if(this.length==0)return null;var e=this[0].getBoundingClientRect();return{left:e.left+window.pageXOffset,top:e.top+window.pageYOffset,width:e.width,height:e.height}},css:function(n,r){if(r===e&&typeof n=="string")return this.length==0?e:this[0].style[x(n)]||f(this[0],"").getPropertyValue(n);var i="";for(t in n)typeof n[t]=="string"&&n[t]==""?this.each(function(){this.style.removeProperty(D(t))}):i+=D(t)+":"+H(t,n[t])+";";return typeof n=="string"&&(r==""?this.each(function(){this.style.removeProperty(D(n))}):i=D(n)+":"+H(n,r)),this.each(function(){this.style.cssText+=";"+i})},index:function(e){return e?this.indexOf(n(e)[0]):this.parent().children().indexOf(this[0])},hasClass:function(e){return this.length<1?!1:P(e).test(this[0].className)},addClass:function(e){return this.each(function(t){r=[];var i=this.className,s=F(this,e,t,i);s.split(/\s+/g).forEach(function(e){n(this).hasClass(e)||r.push(e)},this),r.length&&(this.className+=(i?" ":"")+r.join(" "))})},removeClass:function(t){return this.each(function(n){if(t===e)return this.className="";r=this.className,F(this,t,n,r).split(/\s+/g).forEach(function(e){r=r.replace(P(e)," ")}),this.className=r.trim()})},toggleClass:function(t,r){return this.each(function(i){var s=F(this,t,i,this.className);(r===e?!n(this).hasClass(s):r)?n(this).addClass(s):n(this).removeClass(s)})}},["width","height"].forEach(function(t){n.fn[t]=function(r){var i,s=t.replace(/./,function(e){return e[0].toUpperCase()});return r===e?this[0]==window?window["inner"+s]:this[0]==o?o.documentElement["offset"+s]:(i=this.offset())&&i[t]:this.each(function(e){var i=n(this);i.css(t,F(this,r,e,i[t]()))})}}),p.forEach(function(e,t){n.fn[e]=function(){var e=n.map(arguments,function(e){return k(e)?e:S.fragment(e)});if(e.length<1)return this;var r=this.length,i=r>1,s=t<2;return this.each(function(n,o){for(var u=0;u<e.length;u++){var a=e[s?e.length-u-1:u];q(a,function(e){e.nodeName!=null&&e.nodeName.toUpperCase()==="SCRIPT"&&(!e.type||e.type==="text/javascript")&&window.eval.call(window,e.innerHTML)}),i&&n<r-1&&(a=a.cloneNode(!0)),I(t,o,a)}})},n.fn[t%2?e+"To":"insert"+(t?"Before":"After")]=function(t){return n(t)[e](this),this}}),S.Z.prototype=n.fn,S.camelize=x,S.uniq=T,n.zepto=S,n}();window.Zepto=Zepto,"$"in window||(window.$=Zepto),function(e){function s(e){return e._zid||(e._zid=r++)}function o(e,t,r,i){t=u(t);if(t.ns)var o=a(t.ns);return(n[s(e)]||[]).filter(function(e){return e&&(!t.e||e.e==t.e)&&(!t.ns||o.test(e.ns))&&(!r||s(e.fn)===s(r))&&(!i||e.sel==i)})}function u(e){var t=(""+e).split(".");return{e:t[0],ns:t.slice(1).sort().join(" ")}}function a(e){return new RegExp("(?:^| )"+e.replace(" "," .* ?")+"(?: |$)")}function f(t,n,r){e.isObject(t)?e.each(t,r):t.split(/\s/).forEach(function(e){r(e,n)})}function l(t,r,i,o,a,l){l=!!l;var c=s(t),h=n[c]||(n[c]=[]);f(r,i,function(n,r){var i=a&&a(r,n),s=i||r,f=function(e){var n=s.apply(t,[e].concat(e.data));return n===!1&&e.preventDefault(),n},c=e.extend(u(n),{fn:r,proxy:f,sel:o,del:i,i:h.length});h.push(c),t.addEventListener(c.e,f,l)})}function c(e,t,r,i){var u=s(e);f(t||"",r,function(t,r){o(e,t,r,i).forEach(function(t){delete n[u][t.i],e.removeEventListener(t.e,t.proxy,!1)})})}function v(t){var n=e.extend({originalEvent:t},t);return e.each(d,function(e,r){n[e]=function(){return this[r]=h,t[e].apply(t,arguments)},n[r]=p}),n}function m(e){if(!("defaultPrevented"in e)){e.defaultPrevented=!1;var t=e.preventDefault;e.preventDefault=function(){this.defaultPrevented=!0,t.call(this)}}}var t=e.zepto.qsa,n={},r=1,i={};i.click=i.mousedown=i.mouseup=i.mousemove="MouseEvents",e.event={add:l,remove:c},e.proxy=function(t,n){if(e.isFunction(t)){var r=function(){return t.apply(n,arguments)};return r._zid=s(t),r}if(typeof n=="string")return e.proxy(t[n],t);throw new TypeError("expected function")},e.fn.bind=function(e,t){return this.each(function(){l(this,e,t)})},e.fn.unbind=function(e,t){return this.each(function(){c(this,e,t)})},e.fn.one=function(e,t){return this.each(function(n,r){l(this,e,t,null,function(e,t){return function(){var n=e.apply(r,arguments);return c(r,t,e),n}})})};var h=function(){return!0},p=function(){return!1},d={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"};e.fn.delegate=function(t,n,r){var i=!1;if(n=="blur"||n=="focus")e.iswebkit?n=n=="blur"?"focusout":n=="focus"?"focusin":n:i=!0;return this.each(function(s,o){l(o,n,r,t,function(n){return function(r){var i,s=e(r.target).closest(t,o).get(0);if(s)return i=e.extend(v(r),{currentTarget:s,liveFired:o}),n.apply(s,[i].concat([].slice.call(arguments,1)))}},i)})},e.fn.undelegate=function(e,t,n){return this.each(function(){c(this,t,n,e)})},e.fn.live=function(t,n){return e(document.body).delegate(this.selector,t,n),this},e.fn.die=function(t,n){return e(document.body).undelegate(this.selector,t,n),this},e.fn.on=function(t,n,r){return n==undefined||e.isFunction(n)?this.bind(t,n):this.delegate(n,t,r)},e.fn.off=function(t,n,r){return n==undefined||e.isFunction(n)?this.unbind(t,n):this.undelegate(n,t,r)},e.fn.trigger=function(t,n){return typeof t=="string"&&(t=e.Event(t)),m(t),t.data=n,this.each(function(){"dispatchEvent"in this&&this.dispatchEvent(t)})},e.fn.triggerHandler=function(t,n){var r,i;return this.each(function(s,u){r=v(typeof t=="string"?e.Event(t):t),r.data=n,r.target=u,e.each(o(u,t.type||t),function(e,t){i=t.proxy(r);if(r.isImmediatePropagationStopped())return!1})}),i},"focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout change select keydown keypress keyup error".split(" ").forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}}),["focus","blur"].forEach(function(t){e.fn[t]=function(e){if(e)this.bind(t,e);else if(this.length)try{this.get(0)[t]()}catch(n){}return this}}),e.Event=function(e,t){var n=document.createEvent(i[e]||"Events"),r=!0;if(t)for(var s in t)s=="bubbles"?r=!!t[s]:n[s]=t[s];return n.initEvent(e,r,!0,null,null,null,null,null,null,null,null,null,null,null,null),n}}(Zepto),function(e){function t(e){var t=this.os={},n=this.browser={},r=e.match(/WebKit\/([\d.]+)/),i=e.match(/(Android)\s+([\d.]+)/),s=e.match(/(iPad).*OS\s([\d_]+)/),o=!s&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),a=u&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),l=e.match(/Silk\/([\d._]+)/),c=e.match(/(BlackBerry).*Version\/([\d.]+)/);if(n.webkit=!!r)n.version=r[1];i&&(t.android=!0,t.version=i[2]),o&&(t.ios=t.iphone=!0,t.version=o[2].replace(/_/g,".")),s&&(t.ios=t.ipad=!0,t.version=s[2].replace(/_/g,".")),u&&(t.webos=!0,t.
version=u[2]),a&&(t.touchpad=!0),c&&(t.blackberry=!0,t.version=c[2]),f&&(t.kindle=!0,t.version=f[1]),l&&(n.silk=!0,n.version=l[1]),!l&&t.android&&e.match(/Kindle Fire/)&&(n.silk=!0)}t.call(e,navigator.userAgent),e.__detect=t}(Zepto),function(e,t){function c(e){return e.toLowerCase()}function h(e){return r?r+e:c(e)}var n="",r,i,s,o={Webkit:"webkit",Moz:"",O:"o",ms:"MS"},u=window.document,a=u.createElement("div"),f=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i,l={};e.each(o,function(e,i){if(a.style[e+"TransitionProperty"]!==t)return n="-"+c(e)+"-",r=i,!1}),l[n+"transition-property"]=l[n+"transition-duration"]=l[n+"transition-timing-function"]=l[n+"animation-name"]=l[n+"animation-duration"]="",e.fx={off:r===t&&a.style.transitionProperty===t,cssPrefix:n,transitionEnd:h("TransitionEnd"),animationEnd:h("AnimationEnd")},e.fn.animate=function(t,n,r,i){return e.isObject(n)&&(r=n.easing,i=n.complete,n=n.duration),n&&(n/=1e3),this.anim(t,n,r,i)},e.fn.anim=function(r,i,s,o){var u,a={},c,h=this,p,d=e.fx.transitionEnd;i===t&&(i=.4),e.fx.off&&(i=0);if(typeof r=="string")a[n+"animation-name"]=r,a[n+"animation-duration"]=i+"s",d=e.fx.animationEnd;else{for(c in r)f.test(c)?(u||(u=[]),u.push(c+"("+r[c]+")")):a[c]=r[c];u&&(a[n+"transform"]=u.join(" ")),!e.fx.off&&typeof r=="object"&&(a[n+"transition-property"]=Object.keys(r).join(", "),a[n+"transition-duration"]=i+"s",a[n+"transition-timing-function"]=s||"linear")}return p=function(t){if(typeof t!="undefined"){if(t.target!==t.currentTarget)return;e(t.target).unbind(d,arguments.callee)}e(this).css(l),o&&o.call(this)},i>0&&this.bind(d,p),setTimeout(function(){h.css(a),i<=0&&setTimeout(function(){h.each(function(){p.call(this)})},0)},0),this},a=null}(Zepto),function($){function triggerAndReturn(e,t,n){var r=$.Event(t);return $(e).trigger(r,n),!r.defaultPrevented}function triggerGlobal(e,t,n,r){if(e.global)return triggerAndReturn(t||document,n,r)}function ajaxStart(e){e.global&&$.active++===0&&triggerGlobal(e,null,"ajaxStart")}function ajaxStop(e){e.global&&!--$.active&&triggerGlobal(e,null,"ajaxStop")}function ajaxBeforeSend(e,t){var n=t.context;if(t.beforeSend.call(n,e,t)===!1||triggerGlobal(t,n,"ajaxBeforeSend",[e,t])===!1)return!1;triggerGlobal(t,n,"ajaxSend",[e,t])}function ajaxSuccess(e,t,n){var r=n.context,i="success";n.success.call(r,e,i,t),triggerGlobal(n,r,"ajaxSuccess",[t,n,e]),ajaxComplete(i,t,n)}function ajaxError(e,t,n,r){var i=r.context;r.error.call(i,n,t,e),triggerGlobal(r,i,"ajaxError",[n,r,e]),ajaxComplete(t,n,r)}function ajaxComplete(e,t,n){var r=n.context;n.complete.call(r,t,e),triggerGlobal(n,r,"ajaxComplete",[t,n]),ajaxStop(n)}function empty(){}function mimeToDataType(e){return e&&(e==htmlType?"html":e==jsonType?"json":scriptTypeRE.test(e)?"script":xmlTypeRE.test(e)&&"xml")||"text"}function appendQuery(e,t){return(e+"&"+t).replace(/[&?]{1,2}/,"?")}function serializeData(e){isObject(e.data)&&(e.data=$.param(e.data)),e.data&&(!e.type||e.type.toUpperCase()=="GET")&&(e.url=appendQuery(e.url,e.data))}function serialize(e,t,n,r){var i=$.isArray(t);$.each(t,function(t,s){r&&(t=n?r:r+"["+(i?"":t)+"]"),!r&&i?e.add(s.name,s.value):(n?$.isArray(s):isObject(s))?serialize(e,s,n,t):e.add(t,s)})}var jsonpID=0,isObject=$.isObject,document=window.document,key,name,rscript=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,scriptTypeRE=/^(?:text|application)\/javascript/i,xmlTypeRE=/^(?:text|application)\/xml/i,jsonType="application/json",htmlType="text/html",blankRE=/^\s*$/;$.active=0,$.ajaxJSONP=function(e){var t="jsonp"+ ++jsonpID,n=document.createElement("script"),r=function(){$(n).remove(),t in window&&(window[t]=empty),ajaxComplete("abort",i,e)},i={abort:r},s;return e.error&&(n.onerror=function(){i.abort(),e.error()}),window[t]=function(r){clearTimeout(s),$(n).remove(),delete window[t],ajaxSuccess(r,i,e)},serializeData(e),n.src=e.url.replace(/=\?/,"="+t),$("head").append(n),e.timeout>0&&(s=setTimeout(function(){i.abort(),ajaxComplete("timeout",i,e)},e.timeout)),i},$.ajaxSettings={type:"GET",beforeSend:empty,success:empty,error:empty,complete:empty,context:null,global:!0,xhr:function(){return new window.XMLHttpRequest},accepts:{script:"text/javascript, application/javascript",json:jsonType,xml:"application/xml, text/xml",html:htmlType,text:"text/plain"},crossDomain:!1,timeout:0},$.ajax=function(options){var settings=$.extend({},options||{});for(key in $.ajaxSettings)settings[key]===undefined&&(settings[key]=$.ajaxSettings[key]);ajaxStart(settings),settings.crossDomain||(settings.crossDomain=/^([\w-]+:)?\/\/([^\/]+)/.test(settings.url)&&RegExp.$2!=window.location.host);var dataType=settings.dataType,hasPlaceholder=/=\?/.test(settings.url);if(dataType=="jsonp"||hasPlaceholder)return hasPlaceholder||(settings.url=appendQuery(settings.url,"callback=?")),$.ajaxJSONP(settings);settings.url||(settings.url=window.location.toString()),serializeData(settings);var mime=settings.accepts[dataType],baseHeaders={},protocol=/^([\w-]+:)\/\//.test(settings.url)?RegExp.$1:window.location.protocol,xhr=$.ajaxSettings.xhr(),abortTimeout;settings.crossDomain||(baseHeaders["X-Requested-With"]="XMLHttpRequest"),mime&&(baseHeaders.Accept=mime,mime.indexOf(",")>-1&&(mime=mime.split(",",2)[0]),xhr.overrideMimeType&&xhr.overrideMimeType(mime));if(settings.contentType||settings.data&&settings.type.toUpperCase()!="GET")baseHeaders["Content-Type"]=settings.contentType||"application/x-www-form-urlencoded";settings.headers=$.extend(baseHeaders,settings.headers||{}),xhr.onreadystatechange=function(){if(xhr.readyState==4){clearTimeout(abortTimeout);var result,error=!1;if(xhr.status>=200&&xhr.status<300||xhr.status==304||xhr.status==0&&protocol=="file:"){dataType=dataType||mimeToDataType(xhr.getResponseHeader("content-type")),result=xhr.responseText;try{dataType=="script"?(1,eval)(result):dataType=="xml"?result=xhr.responseXML:dataType=="json"&&(result=blankRE.test(result)?null:JSON.parse(result))}catch(e){error=e}error?ajaxError(error,"parsererror",xhr,settings):ajaxSuccess(result,xhr,settings)}else ajaxError(null,"error",xhr,settings)}};var async="async"in settings?settings.async:!0;xhr.open(settings.type,settings.url,async);for(name in settings.headers)xhr.setRequestHeader(name,settings.headers[name]);return ajaxBeforeSend(xhr,settings)===!1?(xhr.abort(),!1):(settings.timeout>0&&(abortTimeout=setTimeout(function(){xhr.onreadystatechange=empty,xhr.abort(),ajaxError(null,"timeout",xhr,settings)},settings.timeout)),xhr.send(settings.data?settings.data:null),xhr)},$.get=function(e,t){return $.ajax({url:e,success:t})},$.post=function(e,t,n,r){return $.isFunction(t)&&(r=r||n,n=t,t=null),$.ajax({type:"POST",url:e,data:t,success:n,dataType:r})},$.getJSON=function(e,t){return $.ajax({url:e,success:t,dataType:"json"})},$.fn.load=function(e,t){if(!this.length)return this;var n=this,r=e.split(/\s/),i;return r.length>1&&(e=r[0],i=r[1]),$.get(e,function(e){n.html(i?$(document.createElement("div")).html(e.replace(rscript,"")).find(i).html():e),t&&t.call(n)}),this};var escape=encodeURIComponent;$.param=function(e,t){var n=[];return n.add=function(e,t){this.push(escape(e)+"="+escape(t))},serialize(n,e,t),n.join("&").replace("%20","+")}}(Zepto),function(e){e.fn.serializeArray=function(){var t=[],n;return e(Array.prototype.slice.call(this.get(0).elements)).each(function(){n=e(this);var r=n.attr("type");this.nodeName.toLowerCase()!="fieldset"&&!this.disabled&&r!="submit"&&r!="reset"&&r!="button"&&(r!="radio"&&r!="checkbox"||this.checked)&&t.push({name:n.attr("name"),value:n.val()})}),t},e.fn.serialize=function(){var e=[];return this.serializeArray().forEach(function(t){e.push(encodeURIComponent(t.name)+"="+encodeURIComponent(t.value))}),e.join("&")},e.fn.submit=function(t){if(t)this.bind("submit",t);else if(this.length){var n=e.Event("submit");this.eq(0).trigger(n),n.defaultPrevented||this.get(0).submit()}return this}}(Zepto),function(e){function r(e){return"tagName"in e?e:e.parentNode}function i(e,t,n,r){var i=Math.abs(e-t),s=Math.abs(n-r);return i>=s?e-t>0?"Left":"Right":n-r>0?"Up":"Down"}function u(){o=null,t.last&&(t.el.trigger("longTap"),t={})}function a(){o&&clearTimeout(o),o=null}var t={},n,s=750,o;e(document).ready(function(){var f,l;e(document.body).bind("touchstart",function(i){f=Date.now(),l=f-(t.last||f),t.el=e(r(i.touches[0].target)),n&&clearTimeout(n),t.x1=i.touches[0].pageX,t.y1=i.touches[0].pageY,l>0&&l<=250&&(t.isDoubleTap=!0),t.last=f,o=setTimeout(u,s)}).bind("touchmove",function(e){a(),t.x2=e.touches[0].pageX,t.y2=e.touches[0].pageY}).bind("touchend",function(e){a(),t.isDoubleTap?(t.el.trigger("doubleTap"),t={}):t.x2&&Math.abs(t.x1-t.x2)>30||t.y2&&Math.abs(t.y1-t.y2)>30?(t.el.trigger("swipe")&&t.el.trigger("swipe"+i(t.x1,t.x2,t.y1,t.y2)),t={}):"last"in t&&(t.el.trigger("tap"),n=setTimeout(function(){n=null,t.el.trigger("singleTap"),t={}},250))}).bind("touchcancel",function(){n&&clearTimeout(n),o&&clearTimeout(o),o=n=null,t={}})}),["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","tap","singleTap","longTap"].forEach(function(t){e.fn[t]=function(e){return this.bind(t,e)}})}(Zepto),function(){var e=this,t=e._,n={},r=Array.prototype,i=Object.prototype,s=Function.prototype,o=r.push,u=r.slice,a=r.concat,f=r.unshift,l=i.toString,c=i.hasOwnProperty,h=r.forEach,p=r.map,d=r.reduce,v=r.reduceRight,m=r.filter,g=r.every,y=r.some,b=r.indexOf,w=r.lastIndexOf,E=Array.isArray,S=Object.keys,x=s.bind,T=function(e){if(e instanceof T)return e;if(!(this instanceof T))return new T(e);this._wrapped=e};typeof exports!="undefined"?(typeof module!="undefined"&&module.exports&&(exports=module.exports=T),exports._=T):e._=T,T.VERSION="1.4.2";var N=T.each=T.forEach=function(e,t,r){if(e==null)return;if(h&&e.forEach===h)e.forEach(t,r);else if(e.length===+e.length){for(var i=0,s=e.length;i<s;i++)if(t.call(r,e[i],i,e)===n)return}else for(var o in e)if(T.has(e,o)&&t.call(r,e[o],o,e)===n)return};T.map=T.collect=function(e,t,n){var r=[];return e==null?r:p&&e.map===p?e.map(t,n):(N(e,function(e,i,s){r[r.length]=t.call(n,e,i,s)}),r)},T.reduce=T.foldl=T.inject=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(d&&e.reduce===d)return r&&(t=T.bind(t,r)),i?e.reduce(t,n):e.reduce(t);N(e,function(e,s,o){i?n=t.call(r,n,e,s,o):(n=e,i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.reduceRight=T.foldr=function(e,t,n,r){var i=arguments.length>2;e==null&&(e=[]);if(v&&e.reduceRight===v)return r&&(t=T.bind(t,r)),arguments.length>2?e.reduceRight(t,n):e.reduceRight(t);var s=e.length;if(s!==+s){var o=T.keys(e);s=o.length}N(e,function(u,a,f){a=o?o[--s]:--s,i?n=t.call(r,n,e[a],a,f):(n=e[a],i=!0)});if(!i)throw new TypeError("Reduce of empty array with no initial value");return n},T.find=T.detect=function(e,t,n){var r;return C(e,function(e,i,s){if(t.call(n,e,i,s))return r=e,!0}),r},T.filter=T.select=function(e,t,n){var r=[];return e==null?r:m&&e.filter===m?e.filter(t,n):(N(e,function(e,i,s){t.call(n,e,i,s)&&(r[r.length]=e)}),r)},T.reject=function(e,t,n){var r=[];return e==null?r:(N(e,function(e,i,s){t.call(n,e,i,s)||(r[r.length]=e)}),r)},T.every=T.all=function(e,t,r){t||(t=T.identity);var i=!0;return e==null?i:g&&e.every===g?e.every(t,r):(N(e,function(e,s,o){if(!(i=i&&t.call(r,e,s,o)))return n}),!!i)};var C=T.some=T.any=function(e,t,r){t||(t=T.identity);var i=!1;return e==null?i:y&&e.some===y?e.some(t,r):(N(e,function(e,s,o){if(i||(i=t.call(r,e,s,o)))return n}),!!i)};T.contains=T.include=function(e,t){var n=!1;return e==null?n:b&&e.indexOf===b?e.indexOf(t)!=-1:(n=C(e,function(e){return e===t}),n)},T.invoke=function(e,t){var n=u.call(arguments,2);return T.map(e,function(e){return(T.isFunction(t)?t:e[t]).apply(e,n)})},T.pluck=function(e,t){return T.map(e,function(e){return e[t]})},T.where=function(e,t){return T.isEmpty(t)?[]:T.filter(e,function(e){for(var n in t)if(t[n]!==e[n])return!1;return!0})},T.max=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.max.apply(Math,e);if(!t&&T.isEmpty(e))return-Infinity;var r={computed:-Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o>=r.computed&&(r={value:e,computed:o})}),r.value},T.min=function(e,t,n){if(!t&&T.isArray(e)&&e[0]===+e[0]&&e.length<65535)return Math.min.apply(Math,e);if(!t&&T.isEmpty(e))return Infinity;var r={computed:Infinity};return N(e,function(e,i,s){var o=t?t.call(n,e,i,s):e;o<r.computed&&(r={value:e,computed:o})}),r.value},T.shuffle=function(e){var t,n=0,r=[];return N(e,function(e){t=T.random(n++),r[n-1]=r[t],r[t]=e}),r};var k=function(e){return T.isFunction(e)?e:function(t){return t[e]}};T.sortBy=function(e,t,n){var r=k(t);return T.pluck(T.map(e,function(e,t,i){return{value:e,index:t,criteria:r.call(n,e,t,i)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||n===void 0)return 1;if(n<r||r===void 0)return-1}return e.index<t.index?-1:1}),"value")};var L=function(e,t,n,r){var i={},s=k(t);return N(e,function(t,o){var u=s.call(n,t,o,e);r(i,u,t)}),i};T.groupBy=function(e,t,n){return L(e,t,n,function(e,t,n){(T.has(e,t)?e[t]:e[t]=[]).push(n)})},T.countBy=function(e,t,n){return L(e,t,n,function(e,t,n){T.has(e,t)||(e[t]=0),e[t]++})},T.sortedIndex=function(e,t,n,r){n=n==null?T.identity:k(n);var i=n.call(r,t),s=0,o=e.length;while(s<o){var u=s+o>>>1;n.call(r,e[u])<i?s=u+1:o=u}return s},T.toArray=function(e){return e?e.length===+e.length?u.call(e):T.values(e):[]},T.size=function(e){return e.length===+e.length?e.length:T.keys(e).length},T.first=T.head=T.take=function(e,t,n){return t!=null&&!n?u.call(e,0,t):e[0]},T.initial=function(e,t,n){return u.call(e,0,e.length-(t==null||n?1:t))},T.last=function(e,t,n){return t!=null&&!n?u.call(e,Math.max(e.length-t,0)):e[e.length-1]},T.rest=T.tail=T.drop=function(e,t,n){return u.call(e,t==null||n?1:t)},T.compact=function(e){return T.filter(e,function(e){return!!e})};var A=function(e,t,n){return N(e,function(e){T.isArray(e)?t?o.apply(n,e):A(e,t,n):n.push(e)}),n};T.flatten=function(e,t){return A(e,t,[])},T.without=function(e){return T.difference(e,u.call(arguments,1))},T.uniq=T.unique=function(e,t,n,r){var i=n?T.map(e,n,r):e,s=[],o=[];return N(i,function(n,r){if(t?!r||o[o.length-1]!==n:!T.contains(o,n))o.push(n),s.push(e[r])}),s},T.union=function(){return T.uniq(a.apply(r,arguments))},T.intersection=function(e){var t=u.call(arguments,1);return T.filter(T.uniq(e),function(e){return T.every(t,function(t){return T.indexOf(t,e)>=0})})},T.difference=function(e){var t=a.apply(r,u.call(arguments,1));return T.filter(e,function(e){return!T.contains(t,e)})},T.zip=function(){var e=u.call(arguments),t=T.max(T.pluck(e,"length")),n=new Array(t);for(var r=0;r<t;r++)n[r]=T.pluck(e,""+r);return n},T.object=function(e,t){var n={};for(var r=0,i=e.length;r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},T.indexOf=function(e,t,n){if(e==null)return-1;var r=0,i=e.length;if(n){if(typeof n!="number")return r=T.sortedIndex(e,t),e[r]===t?r:-1;r=n<0?Math.max(0,i+n):n}if(b&&e.indexOf===b)return e.indexOf(t,n);for(;r<i;r++)if(e[r]===t)return r;return-1},T.lastIndexOf=function(e,t,n){if(e==null)return-1;var r=n!=null;if(w&&e.lastIndexOf===w)return r?e.lastIndexOf(t,n):e.lastIndexOf(t);var i=r?n:e.length;while(i--)if(e[i]===t)return i;return-1},T.range=function(e,t,n){arguments.length<=1&&(t=e||0,e=0),n=arguments[2]||1;var r=Math.max(Math.ceil((t-e)/n),0),i=0,s=new Array(r);while(i<r)s[i++]=e,e+=n;return s};var O=function(){};T.bind=function(t,n){var r,i;if(t.bind===x&&x)return x.apply(t,u.call(arguments,1));if(!T.isFunction(t))throw new TypeError;return i=u.call(arguments,2),r=function(){if(this instanceof r){O.prototype=t.prototype;var e=new O,s=t.apply(e,i.concat(u.call(arguments)));return Object(s)===s?s:e}return t.apply(n,i.concat(u.call(arguments)))}},T.bindAll=function(e){var t=u.call(arguments,1);return t.length==0&&(t=T.functions(e)),N(t,function(t){e[t]=T.bind(e[t],e)}),e},T.memoize=function(e,t){var n={};return t||(t=T.identity),function(){var r=t.apply(this,arguments);return T.has(n,r)?n[r]:n[r]=e.apply(this,arguments)}},T.delay=function(e,t){var n=u.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},T.defer=function(e){return T.delay.apply(T,[e,1].concat(u.call(arguments,1)))},T.throttle=function(e,t){var n,r,i,s,o,u,a=T.debounce(function(){o=s=!1},t);return function(){n=this,r=arguments;var f=function(){i=null,o&&(u=e.apply(n,r)),a()};return i||(i=setTimeout(f,t)),s?o=!0:(s=!0,u=e.apply(n,r)),a(),u}},T.debounce=function(e,t,n){var r,i;return function(){var s=this,o=arguments,u=function(){r=null,n||(i=e.apply(s,o))},a=n&&!r;return clearTimeout(r),r=setTimeout(u,t),a&&(i=e.apply(s,o)),i}},T.once=function(e){var t=!1,n;return function(){return t?n:(t=!0,n=e.apply(this,arguments),e=null,n)}},T.wrap=function(e,t){return function(){var n=[e];return o.apply(n,arguments),t.apply(this,n)}},T.compose=function(){var e=arguments;return function(){var t=arguments;for(var n=e.length-1;n>=0;n--)t=[e[n].apply(this,t)];return t[0]}},T.after=function(e,t){return e<=0?t():function(){if(--e<1)return t.apply(this,arguments)}},T.keys=S||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)T.has(e,n)&&(t[t.length]=n);return t},T.values=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push(e[n]);return t},T.pairs=function(e){var t=[];for(var n in e)T.has(e,n)&&t.push([n,e[n]]);return t},T.invert=function(e){var t={};for(var n in e)T.has(e,n)&&(t[e[n]]=n);return t},T.functions=T.methods=function(e){var t=[];for(var n in e)T.isFunction(e[n])&&t.push(n);return t.sort()},T.extend=function(e){return N(u.call(arguments,1),function(t){for(var n in t)e[n]=t[n]}),e},T.pick=function(e){var t={},n=a.apply(r,u.call(arguments,1));return N(n,function(n){n in e&&(t[n]=e[n])}),t},T.omit=function(e){var t={},n=a.apply(r,u.call(arguments,1));for(var i in e)T.contains(n,i)||(t[i]=e[i]);return t},T.defaults=function(e){return N(u.call(arguments,1),function(t){for(var n in t)e[n]==null&&(e[n]=t[n])}),e},T.clone=function(e){return T.isObject(e)?T.isArray(e)?e.slice():T.extend({},e):e},T.tap=function(e,t){return t(e),e};var M=function(e,t,n,r){if(e===t)return e!==0||1/e==1/t;if(e==null||t==null)return e===t;e instanceof T&&(e=e._wrapped),t instanceof T&&(t=t._wrapped);var i=l.call(e);if(i!=l.call(t))return!1;switch(i){case"[object String]":return e==String(t);case"[object Number]":return e!=+e?t!=+t:e==0?1/e==1/t:e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object RegExp]":return e.source==t.source&&e.global==t.global&&e.multiline==t.multiline&&e.ignoreCase==t.ignoreCase}if(typeof e!="object"||typeof t!="object")return!1;var s=n.length;while(s--)if(n[s]==e)return r[s]==t;n.push(e),r.push(t);var o=0,u=!0;if(i=="[object Array]"){o=e.length,u=o==t.length;if(u)while(o--)if(!(u=M(e[o],t[o],n,r)))break}else{var a=e.constructor,f=t.constructor;if(a!==f&&!(T.isFunction(a)&&a instanceof a&&T.isFunction(f)&&f instanceof f))return!1;for(var c in e)if(T.has(e,c)){o++;if(!(u=T.has(t,c)&&M(e[c],t[c],n,r)))break}if(u){for(c in t)if(T.has(t,c)&&!(o--))break;u=!o}}return n.pop(),r.pop(),u};T.isEqual=function(e,t){return M(e,t,[],[])},T.isEmpty=function(e){if(e==null)return!0;if(T.isArray(e)||T.isString(e))return e.length===0;for(var t in e)if(T.has(e,t))return!1;return!0},T.isElement=function(e){return!!e&&e.nodeType===1},T.isArray=E||function(e){return l.call(e)=="[object Array]"},T.isObject=function(e){return e===Object(e)},N(["Arguments","Function","String","Number","Date","RegExp"],function(e){T["is"+e]=function(t){return l.call(t)=="[object "+e+"]"}}),T.isArguments(arguments)||(T.isArguments=function(e){return!!e&&!!T.has(e,"callee")}),typeof /./!="function"&&(T.isFunction=function(e){return typeof e=="function"}),T.isFinite=function(e){return T.isNumber(e)&&isFinite(e)},T.isNaN=function(e){return T.isNumber(e)&&e!=+e},T.isBoolean=function(e){return e===!0||e===!1||l.call(e)=="[object Boolean]"},T.isNull=function(e){return e===null},T.isUndefined=function(e){return e===void 0},T.has=function(e,t){return c.call(e,t)},T.noConflict=function(){return e._=t,this},T.identity=function(e){return e},T.times=function(e,t,n){for(var r=0;r<e;r++)t.call(n,r)},T.random=function(e,t){return t==null&&(t=e,e=0),e+(0|Math.random()*(t-e+1))};var _={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"}};_.unescape=T.invert(_.escape);var D={escape:new RegExp("["+T.keys(_.escape).join("")+"]","g"),unescape:new RegExp("("+T.keys(_.unescape).join("|")+")","g")};T.each(["escape","unescape"],function(e){T[e]=function(t){return t==null?"":(""+t).replace(D[e],function(t){return _[e][t]})}}),T.result=function(e,t){if(e==null)return null;var n=e[t];return T.isFunction(n)?n.call(e):n},T.mixin=function(e){N(T.functions(e),function(t){var n=T[t]=e[t];T.prototype[t]=function(){var e=[this._wrapped];return o.apply(e,arguments),F.call(this,n.apply(T,e))}})};var P=0;T.uniqueId=function(e){var t=P++;return e?e+t:t},T.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,B={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},j=/\\|'|\r|\n|\t|\u2028|\u2029/g;T.template=function(e,t,n){n=T.defaults({},n,T.templateSettings);var r=new RegExp([(n.escape||H).source,(n.interpolate||H).source,(n.evaluate||H).source].join("|")+"|$","g"),i=0,s="__p+='";e.replace(r,function(t,n,r,o,u){s+=e.slice(i,u).replace(j,function(e){return"\\"+B[e]}),s+=n?"'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?"'+\n((__t=("+r+"))==null?'':__t)+\n'":o?"';\n"+o+"\n__p+='":"",i=u+t.length}),s+="';\n",n.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{var o=new Function(n.variable||"obj","_",s)}catch(u){throw u.source=s,u}if(t)return o(t,T);var a=function(e){return o.call(this,e,T)};return a.source="function("+(n.variable||"obj")+"){\n"+s+"}",a},T.chain=function(e){return T(e).chain()};var F=function(e){return this._chain?T(e).chain():e};T.mixin(T),N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=r[e];T.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),(e=="shift"||e=="splice")&&n.length===0&&delete n[0],F.call(this,n)}}),N(["concat","join","slice"],function(e){var t=r[e];T.prototype[e]=function(){return F.call(this,t.apply(this._wrapped,arguments))}}),T.extend(T.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}.call(this),function(e,t,n){function d(e,t){if(p[e])return p[e];var n=e.replace(i,"").replace(s,"");return t&&c.forEach(function(e,t){n=n.replace(e,h[t])}),p[e]=n}function v(e,t){return e[t]||(e[t]={})}function m(e,t){return e[t]}function g(e,t){var n=e.split(r);return n.pop(),t.forEach(function(t){var i,s,o,a;t=d(t,!0);if(t.indexOf(".")===0){i=t.split(r),s=n.slice();while(a=i.shift())a===".."?s.pop():a!=="."&&s.push(a);o=s.join(r)}o&&t!==o&&(p[t]=o);if(!m(u,o||t))throw new Error('require a undefined module "'+(o||t)+'" in "'+e+'"')}),function(e){return b(e)}}function y(e,t,n){var r,i,s;e=d(e),i=v(u,e),s=i.exports;if(s)throw new Error(e+" has already defined");i.id=e,s=i.exports={},r=g(e,t),typeof n=="function"?(i.executed=!1,i.factory=n,i.exports=function(){var e=this,t=e.factory;return e.exports=t(r,e.exports,e)||e.exports,e.executed=!0,delete e.factory,e.exports}):(i.executed=!0,i.exports=n)}function b(e){e=d(e,!0);var t=m(u,e);if(t&&t.exports)return t.executed?t.exports:t.exports();throw new Error(e+" has not defined")}if(e.define)return;var r="/",i=/^#/,s=/\.js$/i,o=e.modules||(e.modules={}),u=o,a=e,f=e.head||t.head,l="",c=[],h=[],p={};a.define=y,a.require=b}(window,window.document),define("#mix/core/0.3.0/base/reset-debug",[],function(e,t,n){var r,i=Object.prototype.toString,s=Object.prototype.hasOwnProperty,o=Array.prototype.slice;Object.keys||(Object.keys=function(e){var t=[],n=0;for(var r in e)s.call(e,r)&&(t[n++]=r);return t}),Object.each||(Object.each=function(e,t,n){if(e==null)return;if(s.call(e,"length"))Array.prototype.forEach.call(e,t,n);else if(typeof e=="object")for(var r in e)s.call(e,r)&&t.call(n,e[r],r,e)}),Object.clone||(Object.clone=function(e,t){return Object.isTypeof(e,"array")?t?arr.map(function(e){return Object.clone(e,t)}):e.slice():typeof e=="object"?Object.extend({},e,t):e}),Object.extend||(Object.extend=function(e,t,n){var i=Array.make(arguments),e=i.shift(),n=i.pop();return Object.isTypeof(n,"boolean")||(i.push(n),n=r),Object.each(i,function(t){Object.each(t,function(t,r){e[r]=n?Object.clone(t):t})}),e});if(!Object.isTypeof){var u=/^\[object\s\s*(\w\w*)\s*\]$/;Object.isTypeof=function(e,t){var n=i.call(e).toLowerCase(),r=u.exec(n),s;if(!r)return;return s=r[1],t?s===t.toLowerCase():s}}!Array.make&&!Array.from&&(Array.from=Array.make=function(e){if(s.call(e,"length"))return o.call(e)}),Array.equal||(Array.equal=function(e,t){if(e.length==t.length){for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return!1}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){var n=this,r=n.length;for(var i=0;i<r;i++)i in n&&e.call(t,n[i],i,n)}),Array.prototype.map||(Array.prototype.map=function(e,t){var n=this,r=n.length,i=new Array(r);for(var s=0;s<r;s++)s in n&&(i[s]=e.call(t,n[s],s,n));return i}),Array.prototype.filter||(Array.prototype.filter=function(e,t){var n=this,r=n.length,i=[],s;for(var o=0;o<r;o++)s=n[o],e.call(t,s,o,n)&&i.push(s);return i}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n=this,r=n.length,i=t||0;if(!r||i>=r)return-1;i<0&&(i+=r);for(;i<length;i++)if(s.call(n,i)&&e===n[i])return i;return-1});if(!String.prototype.trim){var a=/^\s\s*/,f=/\s\s*$/;String.prototype.trim=function(){return this.replace(a,"").replace(f,"")}}if(!Function.prototype.bind){var l=function(){};Function.prototype.bind=function(e){var t=this,n=Array.make(arguments),r;if(!Object.isTypeof(t,"function"))throw new TypeError;return n=n.slice(1),r=function(){var i=Array.make(arguments);if(this instanceof r){l.prototype=t.prototype;var s=new l,o=t.apply(s,n.concat(i));return Object(o)===o?o:s}return t.apply(e,n.concat(i))}}}}),define("#mix/core/0.3.0/base/class-debug",[],function(e,t,n){function r(e){if(!(this instanceof r)&&Object.isTypeof(e,"function"))return u(e)}function i(){}function o(e){var t,n;for(t in e)n=e[t],r.Mutators.hasOwnProperty(t)?r.Mutators[t].call(this,n):this.prototype[t]=n}function u(e){return e.extend=r.extend,e.implement=o,e}r.create=function(e,t){function n(){e.apply(this,arguments),this.constructor===n&&this.initialize&&this.initialize.apply(this,arguments)}return Object.isTypeof(e,"function")||(t=e,e=null),t||(t={}),e||(e=t.Extends||r),t.Extends=e,e!==r&&Object.extend(n,e),o.call(n,t),u(n)},r.extend=function(e){return e||(e={}),e.Extends=this,r.create(e)},r.Mutators={Extends:function(e){var t=this.prototype,n=s(e.prototype);Object.extend(n,t),n.constructor=this,this.prototype=n,this.superclass=e.prototype},Implements:function(e){Object.isTypeof(e,"array")||(e=[e]);var t=this.prototype,n,r=t.constructor;while(n=e.shift())Object.extend(t,n.prototype||n);t.constructor=r},Statics:function(e){Object.extend(this,e)}};if(Object.__proto__)function s(e){return{__proto__:e}}else{function i(){}function s(e){return i.prototype=e,new i}}n.exports=r}),define("#mix/core/0.3.0/base/message-debug",["mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug"],function(e,t,n){function a(e,t){var n,r,i;return(r=t.match(s))&&r[1]==="*"?(n=[],i=new RegExp("^(@[^\\:]+\\:)?"+t+"$"),Object.each(e,function(e,t){i.test(t)&&(n=n.concat(e))})):n=e[t],n}e("mix/core/0.3.0/base/reset-debug");var r=e("mix/core/0.3.0/base/class-debug"),i=/\s+/,s=/^\@([^:]+)\:/,o=":",u=0,f=r.create({initialize:function(e,t,n){var r=this;r.__msgObj={name:e||"anonymous",id:t||u++,cache:{},defaultContext:n||r}},on:function(e,t,n){var r=this,u=r.__msgObj.cache,a=r.__msgObj.defaultContext,f,l,c;if(!t)return r;e&&(f=e.match(s))?e=e.split(o)[1]:f=[""],e=e.split(i);while(l=e.shift())l=f[0]+l,c=u[l]||(u[l]=[]),c.push(t,n||a);return r},off:function(e,t,n){var r=this,u=r.__msgObj.cache,a="",f,l,c,h;if(!(e||t||n))return delete r.__msgObj.events,r;e&&(a=e.match(s))?e=e.split(o)[1].split(i):(e=e?e.split(i):Object.keys(u),a=[""]);while(f=e.shift()){f=a[0]+f,l=u[f];if(!l)continue;if(!t&&!n){delete u[f];continue}for(c=l.length-2;c>=0;c-=2)t&&l[c]!==t||n&&l[c+1]!==n||l.splice(c,2)}return r},has:function(e,t,n){var r=this,i=r.__msgObj.cache,s=a(i,e),o;if(!s)return!1;if(!t&&!n)return!0;for(o=s.length-2;o>=0;o-=2)if(!(t&&s[o]!==t||n&&s[o+1]!==n))return!0;return!1},once:function(e,t,n){function i(){t.apply(this,arguments),r.off(e,i,n)}var r=this;r.on(e,i,n)},trigger:function(e){var t=this,n=t.__msgObj.cache,r=t.__msgObj.defaultContext,s,o,u,f,l,c=[],h;e=e.split(i);for(f=1,l=arguments.length;f<l;f++)c[f-1]=arguments[f];while(s=e.shift()){t.log(s+":("+c.join(",")+")");if(o=n.all)o=o.slice();if(u=a(n,s))u=u.slice();if(u)for(f=0,l=u.length;f<l;f+=2)u[f].apply(u[f+1]||r,c);if(o){h=[s].concat(c);for(f=0,l=o.length;f<l;f+=2)o[f].apply(o[f+1]||r,h)}}return t},log:function(e){var t=this;console.log("[("+t.__msgObj.id+")"+t.__msgObj.name+"]",{id:t.__msgObj.id,name:t.__msgObj.name,msg:e})}});f.SPLITER_REG=i,f.AT_REG=s,f.singleton=new f("global"),n.exports=f}),define("#mix/core/0.3.0/base/util-debug",["mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug"],function(e,t,n){e("mix/core/0.3.0/base/reset-debug");var r=e("mix/core/0.3.0/base/class-debug"),i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},s=/^[-+]?\d\d*\.?\d\d*/,o=/[&<>"'\/]/g,u=r.create({initialize:function(){},escape:function(e){return(""+e).replace(o,function(e){return i[e]})},str2val:function(e){return e==null||e==undefined||e==NaN?e:(e+="",e==="true"||e==="false"?e==="true"?!0:!1:s.test(e)?parseFloat(e):e)}});u.singleton=new u,n.exports=u}),define("#mix/core/0.3.0/url/router-debug",["mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug","mix/core/0.3.0/base/message-debug"],function(e,t,n){e("mix/core/0.3.0/base/reset-debug");var r=e("mix/core/0.3.0/base/class-debug"),i=e("mix/core/0.3.0/base/message-debug"),s=window,o=s.document,u=s.location,a=r.create({Implements:i,initialize:function(){var e=this;i.prototype.initialize.call(e,"router"),e._handlers=[],e._options={},e._changeHanlder=e._changeHanlder.bind(e)},_getHash:function(){return u.hash.slice(1)||""},_setHash:function(e){u.hash=e},_resetHandler:function(){var e=this,t=e._handlers;Object.each(t,function(e){e.matched=!1})},_changeHanlder:function(){var e=this;e._resetHandler(),e.match()},start:function(e){var t=this,n;return a.started?!1:(a.started=!0,s.addEventListener("hashchange",t._changeHanlder,!1),e=Object.extend(t._options,e||{}),e.firstMatch!==!1&&t.match(),!0)},stop:function(){var e=this;return a.started?(s.removeEventListener("hashchange",e._changeHanlder,!1),a.started=!1,e._options={},e._handlers=[],e._fragment=null,!0):!1},match:function(){var e=this,t=e._options,n=e._handlers,r,i,s=!0;if(!a.started)return;i=e._fragment=e._getHash();for(var o=0;o<n.length;o++){r=n[o];if(!r.matched&&r.route.test(i)){s=!1,r.matched=!0,r.callback(i);if(r.last)break}}s&&e.trigger("unmatched",i)},add:function(e,t,n){var r=this,i=r._handlers;i.push({route:e,callback:t,matched:!1,last:!!n})},remove:function(e,t){var n=this,r=n._handlers;for(var i=0;i<r.length;i++){var s=r[i];if(s.route.source===e.source&&(!t||s.callback===t))return r.splice(i,1)}},navigate:function(e){var t=this,e;if(!a.started)return;e||(e=""),t._fragment!==e&&t._setHash(e)}});a.started=!1,a.singleton=new a,n.exports=a}),define("#mix/core/0.3.0/url/navigate-debug",["mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug","mix/core/0.3.0/base/message-debug","mix/core/0.3.0/url/router-debug"],function(e,t,n){e("mix/core/0.3.0/base/reset-debug");var r=e("mix/core/0.3.0/base/class-debug"),i=e("mix/core/0.3.0/base/message-debug"),s=e("mix/core/0.3.0/url/router-debug"),o=/\:(\w\w*)/g,u=/\*(\w\w*)/g,a=/P\<(\w\w*?)\>/g,f="!",l=window,c=l.document,h=l.history,p=l.location,d=r.create({Implements:i,initialize:function(e){var t=this;i.prototype.initialize.call(t,"navigate"),t._move=null,t._datas=null,t._routes={},t._states=[],t._stateIdx=0,t._stateLimit=e.stateLimit||100,t._router=e.useRouter},_convertParams:function(e){return e.replace(o,"(P<$1>[^\\/]*?)").replace(u,"(P<$1>.*?)")},_extractNames:function(e){var t=e.match(a),n={};return t&&Object.each(t,function(e,t){n[e.replace(a,"$1")]=t}),n},_extractArgs:function(e){var t=e.split("&");return e={},Object.each(t,function(t){if(t){var n=t.split("=");e[n[0]]=n[1]}}),e},_parseRoute:function(e){return e=e.replace(a,""),new RegExp("^("+e+")("+f+".*?)?$")},_stateEquals:function(e,t){return!e||!t?!1:e.name!==t.name||e.fragment!==
t.fragment?!1:!0},_pushState:function(e,t,n,r){var i=this,s=i._states,o=i._stateIdx,u=i._stateLimit,a=s.length,f=i._move,l=i._transition,c=i._datas,h=s[o-1],p=s[o+1],d={name:e,fragment:t,params:n,args:r};return f==null&&(!c&&i._stateEquals(h,d)?l=f="backward":l=f="forward"),f==="backward"?o===0&&a>0?s.unshift(d):o>0&&(o--,d=h):f==="forward"&&(o===u-1?(s.shift(),s.push(d)):o===0&&a===0?s.push(d):!c&&i._stateEquals(p,d)?(o++,d=p):(o++,s.splice(o),s.push(d))),d.move=f,d.transition=l,c&&(d.datas=c),i._move=null,i._datas=null,i._stateIdx=o,i.trigger(f,d),d},getState:function(){var e=this;return e._states[e._stateIdx]},getStateIndex:function(){var e=this;return e._stateIdx},addRoute:function(e,t,n){var r=this,i,s,o;arguments.length===1&&(n=arguments[0],e=null,t=null),n||(n={}),n["default"]?r._router.on("unmatched",function(t){var i=r._pushState(e,t);n.callback&&n.callback(i)}):e&&t&&(t=r._convertParams(t),s=r._extractNames(t),o=r._parseRoute(t),r._routes[e]=o,r._router.add(o,function(t){var i=t.match(o).slice(2),u=r._extractArgs(i.pop()||""),a={},f;Object.each(s,function(e,t){a[t]=i[e]}),f=r._pushState(e,t,a,u),n.callback&&n.callback(f)},n.last))},removeRoute:function(e){var t=this,n=t._routes[e];n&&t._router.remove(n)},forward:function(e,t){var n=this,r=n._states,i=n._stateIdx,s=r[i]||{},o=[];n._move="forward",n._transition="forward",t||(t={});if(e){if(t.datas||s.fragment!==e)t.args&&Object.each(t.args,function(e,t){o.push(t+"="+e)}),t.datas&&(n._datas=Object.clone(t.datas)),t.transition==="backward"&&(n._transition="backward"),n._router.navigate(e+(o.length?f+o.join("&"):""))}else h.forward()},backward:function(e){var t=this,n=t._stateIdx;if(n===0)return;t._move="backward",t._transition="backward",e||(e={}),e.transition==="forward"&&(t._transition="forward"),h.back()}});d.singleton=new d({useRouter:s.singleton}),n.exports=d}),define("#mix/sln/0.3.0/modules/gesture-debug",["mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug"],function(e,t,n){function u(e,t,n,r,i,s,o,u){var a=Math.atan2(u-s,o-i)-Math.atan2(r-t,n-e),f=Math.sqrt((Math.pow(u-s,2)+Math.pow(o-i,2))/(Math.pow(r-t,2)+Math.pow(n-e,2))),l=[i-f*e*Math.cos(a)+f*t*Math.sin(a),s-f*t*Math.cos(a)-f*e*Math.sin(a)];return{rotate:a,scale:f,translate:l,matrix:[[f*Math.cos(a),-f*Math.sin(a),l[0]],[f*Math.sin(a),f*Math.cos(a),l[1]],[0,0,1]]}}function a(e,t,n){var r=document.createEvent("HTMLEvents");return r.initEvent(e,!0,!0),t&&(n?Object.each(n,function(e){r[e]=t[e]}):Object.extend(r,t)),r}e("mix/core/0.3.0/base/reset-debug");var r=window,i=r.document,s=["screenX","screenY","clientX","clientY","pageX","pageY"],o=e("mix/core/0.3.0/base/class-debug"),f=o.create({initialize:function(e){var t=this;t._el=e,t._myGestures={},t._lastTapTime=NaN,t._onStart=t._onStart.bind(t),t._onDoing=t._onDoing.bind(t),t._onEnd=t._onEnd.bind(t),t._onTap=t._onTap.bind(t)},getElement:function(){return that._el},enable:function(){var e=this,t=e._el;t.addEventListener("touchstart",e._onStart,!1),t.addEventListener("tap",e._onTap,!1)},disable:function(){var e=this,t=e._el;t.removeEventListener("touchstart",e._onStart,!1),t.removeEventListener("tap",e._onTap,!1)},_onStart:function(e){var t=this,n=t._el,r=t._myGestures;Object.keys(r).length===0&&(i.body.addEventListener("touchmove",t._onDoing,!1),i.body.addEventListener("touchend",t._onEnd,!1)),Object.each(e.changedTouches,function(e){var t={};for(var i in e)t[i]=e[i];var s={startTouch:t,startTime:Date.now(),status:"tapping",pressingHandler:setTimeout(function(){if(s.status==="tapping"){s.status="pressing";var e=a("press",t);n.dispatchEvent(e)}clearTimeout(s.pressingHandler),s.pressingHandler=null},500)};r[e.identifier]=s});if(Object.keys(r).length==2){var s=a("dualtouchstart");s.touches=JSON.parse(JSON.stringify(e.touches)),n.dispatchEvent(s)}},_onDoing:function(e){var t=this,n=t._el,r=t._myGestures;Object.each(e.changedTouches,function(e){var t=r[e.identifier],i,o,u,f;if(!t)return;i=e.clientX-t.startTouch.clientX,o=e.clientY-t.startTouch.clientY,u=Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),t.status=="tapping"&&u>10&&(t.status="panning",f=a("panstart",e,s),n.dispatchEvent(f)),t.status=="panning"&&(f=a("pan",e,s),f.displacementX=i,f.displacementY=o,n.dispatchEvent(f))});if(Object.keys(r).length==2){var i=[],o=[],f,l;Object.each(e.touchs,function(e){var t;if(t=r[e.identifier])i.push([t.startTouch.clientX,t.startTouch.clientY]),o.push([e.clientX,e.clientY])}),f=u(i[0][0],i[0][1],i[1][0],i[1][1],o[0][0],o[0][1],o[1][0],o[1][1]),l=a("dualtouch",f),l.touches=JSON.parse(JSON.stringify(e.touches)),n.dispatchEvent(l)}},_onEnd:function(e){var t=this,n=t._el,r=t._myGestures,o;Object.keys(r).length==2&&(o=a("dualtouchend"),o.touches=JSON.parse(JSON.stringify(e.touches)),n.dispatchEvent(o));for(var u=0;u<e.changedTouches.length;u++){var f=e.changedTouches[u],l=f.identifier,c=r[l];if(!c)continue;c.pressingHandler&&(clearTimeout(c.pressingHandler),c.pressingHandler=null),c.status==="tapping"&&(o=a("tap",f,s),n.dispatchEvent(o));if(c.status==="panning"){o=a("panend",f,s),n.dispatchEvent(o);var h=Date.now()-c.startTime;h<300&&(o=a("flick",f,s),o.duration=h,o.valocityX=(f.clientX-c.startTouch.clientX)/h,o.valocityY=(f.clientY-c.startTouch.clientY)/h,o.displacementX=f.clientX-c.startTouch.clientX,o.displacementY=f.clientY-c.startTouch.clientY,n.dispatchEvent(o))}c.status==="pressing"&&(o=a("pressend",f,s),n.dispatchEvent(o)),delete r[l]}Object.keys(r).length==0&&(i.body.removeEventListener("touchend",t._onEnd),i.body.removeEventListener("touchmove",t._onDoing))},_onTap:function(e){var t=this,n=t._el,r=t._lastTapTime;if(Date.now()-r<500){var i=document.createEvent("HTMLEvents");i.initEvent("doubletap",!0,!0),Object.each(s,function(t){i[t]=e[t]}),n.dispatchEvent(i)}t._lastTapTime=Date.now()}});return f}),define("#mix/sln/0.3.0/modules/transform-debug",[],function(e,t,n){function l(e,t){return[[(e/3+(e+t)/3-e)/(t-e),(e*e/3+e*t*2/3-e*e)/(t*t-e*e)],[(t/3+(e+t)/3-e)/(t-e),(t*t/3+e*t*2/3-e*e)/(t*t-e*e)]]}function c(e){var t,n;t=getComputedStyle(e).webkitTransform;if(t!=="none"){if(n=t.match(r))return parseInt(n[1])||0;if(n=t.match(i))return parseInt(n[1])||0}return 0}function h(e){var t,n;t=getComputedStyle(e).webkitTransform;if(t!=="none"){if(n=t.match(r))return parseInt(n[2])||0;if(n=t.match(i))return parseInt(n[2])||0}return 0}function p(e,t){return e+="",t+="",e.indexOf("%")<0&&e!=="0"&&(e+="px"),t.indexOf("%")<0&&t!=="0"&&(t+="px"),a&&f?"translate3d("+e+", "+t+", 0)":"translate("+e+", "+t+")"}function d(e,t,n){function i(t){if(r||t&&(t.srcElement!==e||t.propertyName!==s))return;r=!0,e.style.webkitTransition="none",e.removeEventListener("webkitTransitionEnd",i,!1),n&&setTimeout(n,50)}var r=!1;e.addEventListener("webkitTransitionEnd",i,!1)}function v(e,t,n,r,i,o,u){d(e,t,u),e.style.webkitTransition=[s,t,n,r].join(" "),e.style.webkitTransform=p(i,o)}var r=/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([\d-]+), ([-\d]+), [\d-]+, \d+\)/,i=/^matrix\(\d+, \d+, \d+, \d+, ([-\d]+), ([-\d]+)\)$/,s="-webkit-transform",o=navigator.appVersion,u=/android/gi.test(o),a=/iphone|ipad/gi.test(o),f="WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix;t.getY=h,t.getX=c,t.getTranslate=p,t.getBezier=l,t.start=v}),define("#mix/sln/0.3.0/modules/scroll-debug",["./gesture-debug","./transform-debug","mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug"],function(e,t,n){function l(e){var t=e.parentNode,n=getComputedStyle(t),r=0-e.scrollHeight+t.offsetHeight-parseInt(n.paddingTop)-parseInt(n.paddingBottom);return r>0&&(r=0),r}e("mix/core/0.3.0/base/reset-debug");var r=window,i=r.document,s=r.navigator,o=e("mix/core/0.3.0/base/class-debug"),u=e("./gesture-debug"),a=e("./transform-debug"),f=!1,c=o.create({initialize:function(e){var t=this;t._wrap=e,t._scroller=e.children[0],t._gesture=new u(t._scroller),t._originalY=null,t._currentY=null,t._scrollHeight=null,t._scrollEndHandler=null,t._scrollEndCancel=!1,t._refreshed=!1,t._preventBodyTouch=t._preventBodyTouch.bind(t),t._onTouchStart=t._onTouchStart.bind(t),t._onPanStart=t._onPanStart.bind(t),t._onPan=t._onPan.bind(t),t._onPanEnd=t._onPanEnd.bind(t),t._onFlick=t._onFlick.bind(t),t._onScrollEnd=t._onScrollEnd.bind(t)},enable:function(){var e=this,t=e._scroller;e._gesture.enable(),t.addEventListener("touchstart",e._onTouchStart,!1),t.addEventListener("panstart",e._onPanStart,!1),t.addEventListener("pan",e._onPan,!1),t.addEventListener("panend",e._onPanEnd,!1),t.addEventListener("flick",e._onFlick,!1),f||(f=!0,i.body.addEventListener("touchmove",e._preventBodyTouch,!1))},disable:function(){var e=this,t=e._scroller;e._gesture.disable(),t.removeEventListener("touchstart",e._onTouchStart,!1),t.removeEventListener("panstart",e._onPanStart,!1),t.removeEventListener("pan",e._onPan,!1),t.removeEventListener("panend",e._onPanEnd,!1),t.removeEventListener("flick",e._onFlick,!1),f&&(f=!1,i.body.removeEventListener("touchmove",e._preventBodyTouch,!1))},refresh:function(){this._refreshed=!0},getHeight:function(){return this._scroller.offsetHeight},getTop:function(){return-a.getY(this._scroller)},to:function(e){var t=this,n=t._scroller,r=l(n);e=-e,e<r?e=r:e>0&&(e=0),n.style.webkitTransform=a.getTranslate(0,e),t._onScrollEnd()},_preventBodyTouch:function(e){return e.preventDefault(),!1},_onTouchStart:function(e){var t=this,n=t._scroller;n.style.webkitTransition="none",n.style.webkitTransform=getComputedStyle(n).webkitTransform,t._refreshed&&(t._refreshed=!1,t._scrollHeight=n.offsetHeight,n.style.height="auto",n.style.height=t._scrollHeight+"px")},_onPanStart:function(e){var t=this,n=t._scroller;t._originalY=a.getY(n)},_onPan:function(e){var t=this,n=t._scroller,r=l(n),i=t._originalY,s=t._currentY=i+e.displacementY;s>0?n.style.webkitTransform=a.getTranslate(0,s/2):s<r?n.style.webkitTransform=a.getTranslate(0,(r-s)/2+s):n.style.webkitTransform=a.getTranslate(0,s)},_onPanEnd:function(e){var t=this,n=t._scroller,r=t._currentY,i=l(n),s=null;r>0&&(s=0),r<i&&(s=i),s!=null?a.start(n,"0.4s","ease-out","0s",0,s,t._onScrollEnd):t._onScrollEnd()},_onFlick:function(e){var t=this,n=t._scroller,r=t._currentY,i=l(n);t._scrollEndCancel=!0;if(r<i||r>0)return;var s=a.getY(n),o=e.valocityY;o>1.5&&(o=1.5),o<-1.5&&(o=-1.5);var u=.0015*(o/Math.abs(o)),f=o/u,c=s+f*o/2;if(c>0||c<i){var h=c>0?1:-1,p=c>0?0:i;c=(c-p)/2+p,f=(h*Math.sqrt(2*u*(c-s)+o*o)-o)/u,v=o-u*f,a.start(n,f.toFixed(0)+"ms","cubic-bezier("+a.getBezier(-o/u,-o/u+f)+")","0s",0,c.toFixed(0),function(){o=v,s=c,u=.0045*(o/Math.abs(o)),f=-o/u,c=p,a.start(n,(0-f).toFixed(0)+"ms","cubic-bezier("+a.getBezier(-f,0)+")","0s",0,c.toFixed(0),t._onScrollEnd)})}else a.start(n,f.toFixed(0)+"ms","cubic-bezier("+a.getBezier(-f,0)+")","0s",0,c.toFixed(0),t._onScrollEnd)},_onScrollEnd:function(){var e=this;e._scrollEndCancel=!1,setTimeout(function(){e._scrollEndCancel||e._scrollEndHandler&&e._scrollEndHandler()},10)}});return c}),define("#mix/sln/0.3.0/modules/component-debug",["./scroll-debug","./gesture-debug","./transform-debug","mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug","mix/core/0.3.0/base/message-debug","mix/core/0.3.0/url/navigate-debug"],function(e,t,n){e("mix/core/0.3.0/base/reset-debug");var r=window,i=r.document,s=e("mix/core/0.3.0/base/class-debug"),o=e("mix/core/0.3.0/base/message-debug"),u=e("mix/core/0.3.0/url/navigate-debug").singleton,a=e("./scroll-debug"),f=e("./transform-debug"),l={},c=function(){},h=function(e,t){e.fn||(e.fn={}),Object.extend(e.fn,t)},p=s.create({Implements:o,initialize:function(){o.prototype.initialize.call(this,"component")},get:function(e){return l[e]},initViewport:function(e){l.viewport=e,e.getAttribute("id")||e.setAttribute("id","viewport-"+Date.now())},initTitlebar:function(e){var t=l.viewport;t.className+=" enableTitlebar",l.titlebar=e,h(e,{change:function(t,n){function o(e){i.className="",i.removeEventListener("webkitTransitionEnd",o)}var r=this,i=e.querySelector("ul"),s=i.querySelector("li:first-child");s.innerHTML=t,i.className=n,setTimeout(function(){i.className+=" transition",i.addEventListener("webkitTransitionEnd",o,!1)},1)}})},initBtn:function(e,t){l[e]=t;var n=this;return h(t,{setText:function(e){t.innerText=e},show:function(){t.style.visibility=""},hide:function(){t.style.visibility="hidden"}}),t.addEventListener("click",function(t){return n.trigger(e+"Click"),t.preventDefault(),!1}),t},initBackBtn:function(e){this.initBtn("backBtn",e)},initFuncBtn:function(e){this.initBtn("funcBtn",e)},initContent:function(e){l.content=e;var t=e.querySelector("div > .active"),n=e.querySelector("div > .inactive");h(e,{getActive:function(){return t},getInactive:function(){return n},switchActive:function(){swap=n,n=t,t=swap},setClass:function(){n.className="inactive",t.className="active"}})},getActiveContent:function(){return l.content.fn.getActive()},initScroll:function(e){l.scroll=e;var t=this,n=e.children[0],r=new a(e),i=l.viewport;i.className+=" enableScroll",e.className+=" scroll",r._scrollEndHandler=function(){t.trigger("scrollEnd")},r.enable(),h(e,{refresh:function(){r.refresh()},getScrollHeight:function(){return r.getHeight()},getScrollTop:function(){return r.getTop()},scrollTo:function(e){r.to(e)}})},initTransition:function(e){function i(n){var i=e.querySelector("div"),s,o,u;r.fn.switchActive(),s=r.fn.getActive(),s.innerHTML="",u=f.getY(i),o=(n==="forward"?"-":"")+"33.33%",f.start(i,"0.4s","ease",0,o,u,function(){r.fn.setClass(),u=f.getY(i),i.style.webkitTransform=f.getTranslate(0,u),t.trigger(n+"TransitionEnd")})}l.transition=e;var t=this,n=l.viewport,r=l.content;n.className+=" enableTransition",e.className+=" transition",h(e,{forward:function(){i("forward")},backward:function(){i("backward")}})}});return new p}),define("#mix/sln/0.3.0/modules/page-debug",["mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug","mix/core/0.3.0/base/message-debug"],function(e,t,n){e("mix/core/0.3.0/base/reset-debug");var r=window,i=r.document,s=e("mix/core/0.3.0/base/class-debug"),o=e("mix/core/0.3.0/base/message-debug"),u={UNKOWN:0,UNLOADED:0,READY:1,COMPILED:2},a={},f=s.create({Implements:o,initialize:function(){var e=this,t=e.name;o.prototype.initialize.call(e,"app."+t),e.status=u.UNKOWN,e.ready=e.ready.bind(e),e.unload=e.unload.bind(e),e.on("ready",e.ready),e.on("unloaded",e.unload)},getTitle:function(){return this.title},loadTemplate:function(e,t){var n=this;arguments.length===1&&(t=arguments[0],e=n.template),e&&app.loadFile(e,t)},compileTemplate:function(e,t){var n=this,r=app.config.templateEngine;r&&Object.isTypeof(e,"string")?t(r.compile(e)):t(e)},renderTemplate:function(e,t){var n=this,r=app.config.templateEngine,i=n.compiledTemplate,s="";r&&Object.isTypeof(e,"object")?s=r.render(i,e):s=i,t(s)},fill:function(e,t){function r(){n.renderTemplate(e,function(e){n.trigger("rendered",e),t&&t()})}var n=this;n.compiledTemplate?r():n.once("compiled",r)},ready:function(e){},unload:function(){}});return f.STATUS=u,f.global={},f.fn={},f.define=function(e){var t=f.extend(e),n;return t.implement(f.fn),n=new t,Object.each(f.global,function(e,t){var r=Object.isTypeof(e);switch(r){case"array":n[t]=e.slice(0).concat(n[t]||[]);break;case"object":n[t]=Object.extend(e,n[t]||{});break;case"string":case"number":n[t]==null&&(n[t]=e)}}),a[n.name]=n},f.get=function(e){return a[e]},f.each=function(e){Object.each(a,e)},f}),define("#mix/sln/0.3.0/modules/navigation-debug",["./page-debug","mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug","mix/core/0.3.0/url/navigate-debug","mix/core/0.3.0/base/message-debug"],function(e,t,n){e("mix/core/0.3.0/base/reset-debug");var r=window,i=r.document,s=e("mix/core/0.3.0/base/class-debug"),o=e("mix/core/0.3.0/url/navigate-debug").singleton,u=e("./page-debug"),a=u.STATUS,f=s.create({initialize:function(e){var t=this,n=e.name.split(".");t.pageName=n[0],t.routeName=n[1],t.state=e},ready:function(){var e=u.get(this.pageName);e.status<a.READY&&(e.status=a.READY,e.trigger("ready"))},compile:function(){function t(){e.status<a.COMPILED&&(e.status=a.COMPILED,e.trigger("compiled"))}var e=u.get(this.pageName);e.compiledTemplate?t():e.loadTemplate(function(n){e.compileTemplate(n,function(n){e.compiledTemplate=n,t()})})},unload:function(){var e=this,t=u.get(this.pageName);t.status>a.UNLOADED&&(t.status=a.UNLOADED,t.trigger("unloaded"))}});return Object.extend(f,{_cur:null,getParameter:function(e){if(!this._cur)return;return this._cur.state.params[e]},getArgument:function(e){if(!this._cur)return;return this._cur.state.args[e]},getData:function(e){if(!this._cur)return;return this._cur.state.datas[e]},getPageName:function(){if(!this._cur)return;return this._cur.pageName},getRouteName:function(){if(!this._cur)return;return this._cur.routeName},getState:function(){if(!this._cur)return;return this._cur.state},push:function(e,t){o.forward(e,t)},pop:function(){o.backward()}}),f}),define("#mix/sln/0.3.0/app-debug",["./modules/page-debug","./modules/component-debug","./modules/scroll-debug","./modules/gesture-debug","./modules/transform-debug","./modules/navigation-debug","mix/core/0.3.0/base/reset-debug","mix/core/0.3.0/base/class-debug","mix/core/0.3.0/url/router-debug","mix/core/0.3.0/url/navigate-debug","mix/core/0.3.0/base/message-debug","mix/sln/0.3.0/app-debug"],function(e,t,n){function c(){var e=app.config.viewport,t=e.querySelector("header.titlebar"),n=t.querySelector("li:nth-child(2) button"),r=t.querySelector("li:nth-child(3) button");content=e.querySelector("section.content"),toolbar=e.querySelector("footer.toolbar"),f.initViewport(e),app.config.enableTitlebar&&(f.initTitlebar(t),f.initBackBtn(n),f.initFuncBtn(r)),f.initContent(content),app.config.enableScroll&&f.initScroll(content),app.config.enableTransition&&f.initTransition(content),app.config.enableToolbar&&f.initToolbar()}function h(){function c(e){var s=e.pageName,o=a.get(s),f=o.buttons;t.fn.hide(),n.fn.hide(),f&&Object.each(f,function(e){var s=e.type,o=!1;switch(s){case"back":t.fn.setText(e.text),r=e.handler;if(e.autoHide===!1||u.getStateIndex()>=1)t.fn.show(),o=!0;break;case"func":n.fn.setText(e.text),i=e.handler,n.fn.show(),o=!0;break;default:}o&&e.onshow&&e.onshow.call(t)})}function h(t){var n=t.pageName,r=t.state.transition,i=a.get(n),s=i.getTitle();e.fn.change(s,r)}function p(e){app.config.enableTransition?o.fn[e.state.transition]():(s.fn.switchActive(),s.fn.setClass()),app.navigation._cur&&app.navigation._cur.unload(),app.navigation._cur=e,e.ready(),e.compile()}var e=f.get("titlebar"),t=f.get("backBtn"),n=f.get("funcBtn"),r=null,i=null,s=f.get("content"),o=f.get("transition");f.on("backBtnClick",function(){r?r():u.backward()}),f.on("funcBtnClick",function(){i&&i()}),u.on("forward backward",function(e){var t=new l(e);p(t),app.config.enableTitlebar&&(c(t),h(t))}),a.each(function(e){var t=e.name,n=e.route;n?Object.isTypeof(n,"string")&&(n={name:"anonymous",text:n}):n={name:"default","default":!0},u.addRoute(t+"."+n.name,n.text,n),e.on("rendered",function(e){var t=f.get("scroll"),n=f.getActiveContent();n&&(n.innerHTML=e),t&&t.fn.refresh()})})}e("mix/core/0.3.0/base/reset-debug");var r=window,i=r.document,s=e("mix/core/0.3.0/base/class-debug"),o=e("mix/core/0.3.0/url/router-debug").singleton,u=e("mix/core/0.3.0/url/navigate-debug").singleton,a=e("./modules/page-debug"),f=e("./modules/component-debug"),l=e("./modules/navigation-debug");app={},Object.extend(app,{config:{viewport:null,theme:"iOS",routePrefix:0,routePrefixSep:"/",enableTitlebar:!1,enableScroll:!1,enableTransition:!1,enableToolbar:!1,templateEngine:null},page:a,component:f,navigation:l,plugin:{},loadFile:function(e,t){var n=new r.XMLHttpRequest;n.onreadystatechange=function(){n.readyState===4&&(n.status>=200&&n.status<300||n.status===304)&&t(n.responseText)},n.open("GET",e,!0),n.send()},start:function(){c(),h(),app.plugin.init&&app.plugin.init(),o.start()}}),r.app=app}),require("mix/sln/0.3.0/app-debug"),function(e,t){var n=e.document,r=e.sessionStorage,i=require("mix/core/0.3.0/url/navigate-debug").singleton,s="mix_storage_001_";i.on("forward backward",function(){t.plugin.stateStorage.saveAll()}),t.plugin.stateStorage={saveAll:function(){var e=i._stateIdx+"",t=i._states.length+"";r.setItem(s+"state_index",i._stateIdx),r.setItem(s+"state_length",i._states.length),i._states.forEach(function(e,t){r.setItem(s+"state_item["+t+"]",JSON.stringify(e))})},save:function(){var e=i._stateIdx,t=i._states[e];r.setItem(s+"state_item["+e+"]",JSON.stringify(t))},loadAll:function(){var e,t;i._stateIdx=parseInt(r.getItem(s+"state_index")||0),e=parseInt(r.getItem(s+"state_length")||0);for(t=0;t<e;t++)i._states[t]=JSON.parse(r.getItem(s+"state_item["+t+"]")||"{}")},load:function(){var e=i._stateIdx;i._states[e]=JSON.parse(r.getItem(s+"state_item["+e+"]")||"{}")},clear:function(){var e=i._stateLimit;r.removeItem(s+"state_index"),r.removeItem(s+"state_length");for(var t=0;t<e;t++)r.removeItem(s+"state_item["+t+"]")}},t.plugin.stateStorage.loadAll()}(window,window.app);var win=$(window),T_float=['<div class="c-float-popWrap msgMode hide">','<div class="c-float-modePop">','<div class="warnMsg"></div>','<div class="content"></div>',"</div>","</div>"].join(""),E_float=$(T_float),E_floatMsg=E_float.find(".warnMsg"),E_floatContent=E_float.find(".content"),initDom=!1,domContainer="#tbh5v0",flashTimeoutId;$.extend(ModePop.prototype,{_init:function(){var e=this,t=e._options,n=t.mode,r=t.text,i=t.content,s=t.callback,o=t.background,u=t.useTap?"tap":"click",a=E_float.attr("class");a=a.replace(/(msg|alert|confirm)Mode/i,n+"Mode"),E_float.attr("class",a),o&&E_float.css("background",o),r&&E_floatMsg.html(r),i&&E_floatContent.html(i),initDom||(initDom=!0,$(domContainer).append(E_float),win.on("resize",function(){setTimeout(function(){e._pos()},500)}))},_pos:function(){var e=this,t=document,n=t.documentElement,r=t.body,i,s,o,u,a,f;e.isHide()||(i=r.scrollTop,s=r.scrollLeft,o=n.clientWidth,u=n.clientHeight,a=E_float.width(),f=E_float.height(),E_float.css({top:i+(u-f)/2,left:s+(o-a)/2}))},isShow:function(){return E_float.hasClass("show")},isHide:function(){return E_float.hasClass("hide")},_cbShow:function(){var e=this,t=e._options,n=t.onShow;E_float.css("opacity","1").addClass("show"),n&&n.call(e)},show:function(){var e=this;flashTimeoutId&&(clearTimeout(flashTimeoutId),flashTimeoutId=undefined),e.isShow()?e._cbShow():(E_float.css("opacity","0").removeClass("hide"),e._pos(),setTimeout(function(){e._cbShow()},300),setTimeout(function(){E_float.animate({opacity:"1"},300,"linear")},1))},_cbHide:function(){var e=this,t=e._options,n=t.onHide;E_float.css("opacity","0").addClass("hide"),n&&n.call(e)},hide:function(){var e=this;e.isHide()?e._cbHide():(E_float.css("opacity","1").removeClass("show"),setTimeout(function(){e._cbHide()},300),setTimeout(function(){E_float.animate({opacity:"0"},300,"linear")},1))},flash:function(e){var t=this;opt=t._options,opt.onShow=function(){flashTimeoutId=setTimeout(function(){flashTimeoutId&&t.hide()},e)},t.show()}}),window.notification=new function(){this.flash=function(e,t,n){arguments.length==2&&typeof arguments[1]=="number"&&(n=arguments[1],t=undefined);var r=new ModePop({mode:"msg",text:e,background:t});return r.flash(n||2e3),r}},function(e,t){e.mtopH5Api=mtop_h5api()}(window.app),function(e,t){var n=window,r=/android/gi.test(navigator.appVersion),i="onorientationchange"in window?"orientationchange":"resize";e.Util={Events:function(e,t){var n=this;$(e).unbind();for(var r in t){var i=this[t[r]];if(!i)throw new Error('Event "'+t[r]+'" does not exist');var s=r.match(/^(\S+)\s*(.*)$/),o=s[1],u=s[2];if(u==="")return;$(e).on(o,u,function(e){return function(t){e.call(n,t,this)}}(i))}},getWebpImg:function(e,t){if(!e)return;t=["_",t||"300x300",".jpg"].join("");var n=e.lastIndexOf("_."),r=n!=-1?e.slice(n+2):null,i=r&&r.toLowerCase()=="webp"?!0:!1,s=i?e.slice(0,n):e,o=s.replace(/_\d+x\d+\.jpg?/g,"");return o+=t,i&&o+"_.webp"||o},timeout:3e4,resize:function(e){n.addEventListener(i,function(){setTimeout(function(){e()},r?200:0)},!1)},getActualSize:function(e,t){e.css({position:"absolute",width:"100%",left:-2e4,top:-2e4}).removeClass("none"),t(),e.css({position:"static",width:"auto",left:0,top:0}).addClass("none")},encode:function(e){return encodeURIComponent(e)},sendPoint:function(e){var t=this.fetchHost(),n="http://a."+t+".taobao.com/ajax/pds.do";$.ajax({url:n,type:"get",dataType:"jsonp",data:{pds:e,t:(new Date).getTime()}})},storage:{get:function(e){try{return localStorage.getItem(e)}catch(t){return null}},set:function(e,t){try{localStorage.setItem(e,t)}catch(n){console.log("localstorage异常")}}},pointJudge:function(e){if(!e)return e;var t=e.split("-");return t.length>1&&t[0]==t[1]?t[0]:e}},e.ZDMData={},e.ZDMDetail={},e.helper={}}(window.app);var PageNav=function(t){this.init(t)};PageNav.prototype={setIndex:function(e){var t=this;e=Number(e),isNaN(e)&&(e=1),e>t.pageCount&&(e=t.pageCount),e<=0&&(e=1),t.index=e,t.renderPage()},init:function(e){this.$container||(this.$container=$(e.id)),this.index=Number(e.index?e.index:1),this.pageCount=Number(e.pageCount?e.pageCount:1),this.preFix=e.preFix?e.preFix:"!page/",this.objId=e.objId?e.objId:"Z",this.disableHash=e.disableHash,this.oldIndex=-1;var t=this.preFix.toString().length;this.preFix[t-1]!="/"&&(this.preFix+="/"),isNaN(this.index)&&(this.index=1),this.index>this.pageCount&&(this.index=this.pageCount),this.index<=0&&(this.index=1),this.createDom(),this.eventAttach(),this.parseHash(),this.renderPage()},parseHash:function(){var e=this,t=location.hash,n=t.substr(t.lastIndexOf("/")+1),r=[],i=0,s=[];r=n.split("-");for(var o=0;o<r.length;o++){s=r[o].split("");var u=s.shift();if(u==this.objId){i=Number(s.join(""));if(isNaN(i)||i<=0)e.index=1;i>e.pageCount&&(e.index=e.pageCount),e.index=i}}},setContainer:function(e){this.$container=$(e)},getObjId:function(){return this.objId},changeHash:function(){var e=this,t=location.hash;if(t=="")location.hash=e.preFix+"-"+e.objId+e.index;else{var n=t.lastIndexOf(e.objId),r=n;if(n==-1)location.hash+="-"+e.objId+e.index;else{for(;;){r++;if(t[r]=="-"||!t[r])break}t=t.replace(t.substring(n,r),e.objId+e.index),location.hash=t}}},createDom:function(){var e=this;e.$container.empty();var t=['<section class="c-p-sec">','<div class="c-p-pre">','<span class="c-p-p">',"<em></em>","</span><a>上一页</a>","</div>",'<div class="c-p-cur">','<div class="c-p-arrow c-p-down"><span></span><span></span></div>','<select class="c-p-select">',"</select></div>",'<div class="c-p-next">','<a>下一页</a><span class="c-p-p">',"<em></em>","</span>","</div>","</section>"];e.$container.html(t.join("")),$("select",e.$container).empty(),t=[];for(var n=1;n<=e.pageCount;n++)t[n-1]="<option>第"+n+"页</option>";$("select",e.$container).append(t.join(""))},renderPage:function(){var e=this,t=$("option",e.$container).length,n=$(".c-p-pre",e.$container),r=$(".c-p-next",e.$container);t<=1?(n.addClass("c-p-grey"),r.addClass("c-p-grey"),t=1):e.index==1?(n.addClass("c-p-grey"),t>1&&r.removeClass("c-p-grey")):e.index==t?(r.addClass("c-p-grey"),t>1&&n.removeClass("c-p-grey")):e.index>1&&e.index<t&&(n.removeClass("c-p-grey"),r.removeClass("c-p-grey"));var i=e.index+"/"+t;$(".c-p-arrow span:first-child",e.$container).text(i),$("select",e.$container).get(0).selectedIndex=this.index-1,n=null,r=null},eventDetach:function(){var e=this,t=$(e.$container);t.undelegate("select","mousedown",e.modifyArr),t.undelegate("select","blur",e.blur),t.find(".c-p-pre").undelegate("a","click",e.lastPage),t.find(".c-p-next").undelegate("a","click",e.nextPage),t.undelegate("select","change",e.selectChange),t=null},eventAttach:function(){var e=this,t=$(e.$container);t.delegate("select","mousedown",e.modifyArr=function(t){$(".c-p-arrow",e.$container).removeClass("c-p-down").addClass("c-p-up")}),t.delegate("select","blur",e.blur=function(t){$(".c-p-arrow",e.$container).removeClass("c-p-up").addClass("c-p-down")}),t.find(".c-p-pre").delegate("a","click",e.lastPage=function(t){t.preventDefault();if($(this).parent().hasClass("c-p-grey"))return!1;e.index--,e.renderPage(),e.disableHash?e.$container.trigger("P:switchPage",{index:e.index,type:"pre"}):e.changeHash(),e.oldIndex=e.index}),t.find(".c-p-next").delegate("a","click",e.nextPage=function(t){t.preventDefault();if($(this).parent().hasClass("c-p-grey"))return!1;e.index++,e.renderPage(),e.disableHash?e.$container.trigger("P:switchPage",{index:e.index,type:"next"}):e.changeHash(),e.oldIndex=e.index}),t.delegate("select","change",e.selectChange=function(){e.index=$(this).get(0).selectedIndex+1;if(e.oldIndex==e.index)return;e.renderPage(),$(".c-p-arrow",e.$container).removeClass("c-p-up").addClass("c-p-down"),e.disableHash?e.$container.trigger("P:switchPage",{index:e.index,type:"select"}):e.changeHash(),e.oldIndex=e.index})},pContainer:function(){return this.$container}},window.Swipe=function(e,t){if(!e)return null;var n=this;this.options=t||{},this.index=this.options.startSlide||0,this.speed=this.options.speed||300,this.callback=this.options.callback||function(){},this.delay=this.options.auto||0,this.vertical=!!this.options.vertical,this.preload=this.options.preload,this.lazyloadClass=this.options.lazyloadClass||"lazy",this.lazyloadDataAttr=this.options.lazyloadDataAttr||"src",this.fixWidth=this.options.fixWidth,this.container=e,this.element=this.container.children[0],this.container.style.overflow="hidden",this.element.style.listStyle="none",this.element.style.marginLeft="58px",this.setup(),this.begin(),this.element.addEventListener&&(this.element.addEventListener("touchstart",this,!1),this.element.addEventListener("touchmove",this,!1),this.element.addEventListener("touchend",this,!1),this.element.addEventListener("webkitTransitionEnd",this,!1),this.element.addEventListener("msTransitionEnd",this,!1),this.element.addEventListener("oTransitionEnd",this,!1),this.element.addEventListener("transitionend",this,!1),window.addEventListener("resize",this,!1))},Swipe.prototype={setup:function(){this.slides=this.element.children,this.length=this.slides.length;if(this.length<2)return null;this.width=this.fixWidth||Math.ceil("getBoundingClientRect"in this.container?this.container.getBoundingClientRect().width:this.container.offsetWidth);if(!this.width)return null;this.container.style.visibility="hidden";if(this.vertical)this.element.style.height=Math.ceil(this.slides.length*60)+"px";else{this.element.style.width=Math.ceil(this.slides.length*this.width)+"px";var e=this.slides.length;while(e--){var t=this.slides[e];t.style.width=this.width+"px",t.style.display="table-cell",t.style.verticalAlign="top"}}this.slide(this.index,0),this.container.style.visibility="visible"},slide:function(e,t){var n=this.element.style;t==undefined&&(t=this.speed),n.webkitTransitionDuration=n.MozTransitionDuration=n.msTransitionDuration=n.OTransitionDuration=n.transitionDuration=t+"ms",this.vertical?n.MozTransform=n.webkitTransform="translate3d(0, "+ -(e*60)+"px,0)":(n.MozTransform=n.webkitTransform="translate3d("+ -(e*this.width)+"px,0,0)",n.msTransform=n.OTransform="translateX("+ -(e*this.width)+"px)"),this.index=e,this.vertical&&(this.index<0&&(this.index=0),this.index>this.length-4&&(this.index=this.length-4),n.MozTransform=n.webkitTransform="translate3d(0, "+ -(this.index*60)+"px,0)")},getPos:function(){return this.index},prev:function(e){this.delay=e||0,clearTimeout(this.interval),this.index&&this.slide(this.index-1,this.speed)},next:function(e){this.delay=e||0,clearTimeout(this.interval),this.index<this.length-1?this.slide(this.index+1,this.speed):this.slide(0,this.speed)},begin:function(){var e=this;this.interval=this.delay?setTimeout(function(){e.next(e.delay)},this.delay):0},stop:function(){this.delay=0,clearTimeout(this.interval)},resume:function(){this.delay=this.options.auto||0,this.begin()},load:function(){if(!this.preload)return;var e=this;for(var t=0;t<this.preload;t++)(function(){if(e.index+t<e.length){var n=e.slides[e.index+t];n.getAttribute("loaded")||e._loadImages(n)}})()},_loadImages:function(e){var t=e.querySelectorAll("img."+this.lazyloadClass);for(var n=0;n<t.length;n++)(function(){var r=n,s=new Image;s.onload=function(){t[r].src=this.src,e.setAttribute("loaded",!0)},s.src=t[n].getAttribute("data-"+this.lazyloadDataAttr)}).call(this)},handleEvent:function(e){switch(e.type){case"touchstart":this.onTouchStart(e);break;case"touchmove":this.onTouchMove(e);break;case"touchend":this.onTouchEnd(e);break;case"webkitTransitionEnd":case"msTransitionEnd":case"oTransitionEnd":case"transitionend":this.transitionEnd(e);break;case"resize":this.setup()}},transitionEnd:function(e){this.preload&&this.load(),this.delay&&this.begin(),this.callback(e,this.index,this.slides[this.index])},onTouchStart:function(e){this.start={pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,time:Number(new Date)},this.isScrolling=undefined,this.deltaX=0,this.deltaY=0,this.element.style.MozTransitionDuration=this.element.style.webkitTransitionDuration=0
,e.stopPropagation()},onTouchMove:function(e){if(e.touches.length>1||e.scale&&e.scale!==1)return;this.deltaX=e.touches[0].pageX-this.start.pageX,this.deltaY=e.touches[0].pageY-this.start.pageY,typeof this.isScrolling=="undefined"&&(this.isScrolling=!!(this.isScrolling||Math.abs(this.deltaX)<Math.abs(e.touches[0].pageY-this.start.pageY))),!this.isScrolling&&!this.vertical&&(e.preventDefault(),clearTimeout(this.interval),this.deltaX=this.deltaX/(!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0?Math.abs(this.deltaX)/this.width+1:1),this.element.style.MozTransform=this.element.style.webkitTransform="translate3d("+(this.deltaX-this.index*this.width)+"px,0,0)",e.stopPropagation()),this.vertical&&(e.preventDefault(),clearTimeout(this.interval),this.deltaY=this.deltaY/(!this.index&&this.deltaY>0||this.index==this.length-4&&this.deltaY<0?Math.abs(this.deltaY)/60+1:1),this.element.style.MozTransform=this.element.style.webkitTransform="translate3d(0, "+(this.deltaY-this.index*60)+"px,0)",e.stopPropagation())},onTouchEnd:function(e){var t=Number(new Date)-this.start.time<250&&Math.abs(this.deltaX)>20||Math.abs(this.deltaX)>this.width/2,n=!this.index&&this.deltaX>0||this.index==this.length-1&&this.deltaX<0;this.vertical&&(t=Number(new Date)-this.start.time<250&&Math.abs(this.deltaY)>20||Math.abs(this.deltaY)>this.width/2,n=!this.index&&this.deltaY>0||this.index==this.length-4&&this.deltaY<0),!this.isScrolling&&!this.vertical&&this.slide(this.index+(t&&!n?this.deltaX<0?1:-1:0),this.speed);if(this.vertical){var r=Math.ceil(Math.abs(this.deltaY)/60);this.slide(this.index+(t&&!n?this.deltaY<0?r:-r:0),this.speed)}e.stopPropagation()},destroy:function(){this.element.removeEventListener("touchstart",this),this.element.removeEventListener("touchmove",this),this.element.removeEventListener("touchend",this),this.element.removeEventListener("webkitTransitionEnd",this),this.element.removeEventListener("msTransitionEnd",this),this.element.removeEventListener("oTransitionEnd",this),this.element.removeEventListener("transitionend",this)}},function(){this.JST||(this.JST={}),this.JST["template/add_pic"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="J-uploader">\n    <div class="add-pic" id="J-addPicWrap">\n        <div id="J-uploaderTrigger">\n          <a href="#" id="J-addPicBtn" class="add-pic-btn"></a>\n         <span class="tip">这里可以添加照片，只有上传照片才可以写评论哦~~</span>\n        </div>\n        <div id="J-uploaded" class="uploader-file">\n          <form action="http://wo.m.taobao.com/uploadPicture.htm" method="post" id="J-imgForm" enctype="multipart/form-data">\n              <input type="file" name="picture"  id="J-upload" class="upload-input" multiple/>\n              <input type="hidden" name="ratedUid" id="J-ratedUid" value=""/> <!--被评价的uid-->\n              <input type="hidden" name="itemId" id="J-itemId" value=""/> <!--itemId-->\n              <input type="hidden" name="tradeId" id="J-tradeId" value=""/>  <!---orderId-->\n              <input type="hidden" name="parentTradeId" id="J-parentTradeId" value=""/>  <!---parentOrderId-->\n              <input type="submit" name="" value="上传" class="upload-btn c-btn-oran-small" style="display:none;"/>\n          </form>\n        </div>\n    </div>\n    <div class="comment-area">\n        <em class="arrow"></em>\n        <em class="num"><span id="J-num">0</span>/140</em>\n        <div class="cm-textarea">\n          <textarea name="" id="J_CommentPoster"></textarea>\n        </div>\n    </div>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/comment"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{}){__p.push("\n            ");if(items&&items.length){__p.push("\n\n            ");for(var i=0;i<items.length;i++)__p.push("\n            <li>\n                <p>",items[i].text,"</p>\n                "),items[i].reply&&__p.push('\n                <div class="reply"><strong>卖家回复：</strong>',items[i].reply,"</div>\n                "),__p.push("\n                <p>",items[i].deal,"</p>\n                <p>",items[i].buyer,"<em>",app.helper.rank(items[i].credit),"</em>",items[i].date,"</p>\n            </li>\n            ");__p.push("\n\n\n        ")}__p.push("\n")}return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/comment_item"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),_.each(comments,function(e){__p.push('\n    <li class="z-mod">\n        <div class="hd">\n           <img src="http://wwc.taobaocdn.com/avatar/getAvatar.do?userId=',e.raterUid,'&width=40&height=40&type=sns"/>\n        </div>\n        <div class="bd">\n            <h3>',e.raterUserNick,"</h3>\n\n            <p>",_.escape(e.feedback),'</p>\n            <ul class="pic-desc">\n                '),_.each(e.feedItemPicDOList,function(e){__p.push('\n                  <li><img src="',e.path,'_60x60.jpg"/></li>\n                ')}),__p.push("\n            </ul>\n        </div>\n    </li>\n")}),__p.push("\n\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_comment"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="ds-action">\n    <a href="#" class="ds-coma ww">\n        <img src="http://im.m.taobao.com/ww/status.do?_input_charset=utf-8&amp;nick=%E5%A5%A5%E6%84%8F%E7%8E%9B%E6%97%97%E8%88%B0%E5%BA%97&amp;sid=a43dc100fd92d4d3f446405857471d10" alt="联系卖家">\n    </a>\n    <a href="#" class="ds-coma fav">收藏</a>\n\n\n    '),item.soldout=="false"?(__p.push("\n    "),trade.buySupport&&trade.buySupport=="true"&&(__p.push('<a href="#" class="immbuy'),seller.type=="B"?__p.push(" c-btn-tmall-buy"):__p.push(" c-btn-oran"),__p.push('"><span>立即购买</span></a>')),__p.push("\n    "),trade.cartSupport&&trade.cartSupport=="true"&&__p.push('<a href="#" class="c-btn-blue addcart"><span>加入购物车</span></a>'),__p.push("\n    ")):__p.push('\n    <b class="ds-coma ds-bs"><span>宝贝不能购买</span></b>\n    '),__p.push('\n\n\n    <form id="order-form" name="orderForm" style="display: none;" action="http://b.m.taobao.com/buy.htm?sid=fa5ef1c3e6848fa9433c0ebf894b1e5a&amp;pds=buynow%23h%23detail" method="post">\n        <input type="hidden" name="_input_charset" value="utf-8"/>\n        <input type="hidden" name="item_id" value="4846668057"/>\n        <input type="hidden" name="item_num_id" value="4846668057"/>\n        <input type="hidden" name="tks" value="" />\n        <input type="hidden" id="sku-id" name="skuId" value=""/>\n        <input type="hidden" name="buyNow" value="true" />\n    </form>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_commentAllLayout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<section id="J_commentCont" class="innercontent">\n    <section class="c-comm">\n\n        <div id="J_commcont" class="cc-cont">\n            <ul id="J-detailCommentListAll">\n                <div class="loading"></div>\n            </ul>\n        </div>\n        <div id="J_dcpage" class="c-pnav-con"></div>\n    </section>\n</section>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_extra"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="ds-action">\n    <a href="#" class="ds-coma ww">\n        <img src="http://im.m.taobao.com/ww/status.do?_input_charset=utf-8&amp;nick=%E5%A5%A5%E6%84%8F%E7%8E%9B%E6%97%97%E8%88%B0%E5%BA%97&amp;sid=a43dc100fd92d4d3f446405857471d10" alt="联系卖家">\n    </a>\n    <a href="#" class="ds-coma fav">收藏</a>\n\n\n    '),item.soldout=="false"?(__p.push("\n    "),trade.buySupport&&trade.buySupport=="true"&&(__p.push('<a href="#" class="immbuy'),seller.type=="B"?__p.push(" c-btn-tmall-buy"):__p.push(" c-btn-oran"),__p.push('"><span>立即购买</span></a>')),__p.push("\n    "),trade.cartSupport&&trade.cartSupport=="true"&&__p.push(""),__p.push("\n    ")):__p.push('\n    <b class="ds-coma ds-bs"><span>宝贝不能购买</span></b>\n    '),__p.push('\n\n\n    <form id="order-form" name="orderForm" style="display: none;" action="http://b.m.taobao.com/buy.htm" method="post">\n        <input type="hidden" name="_input_charset" value="utf-8"/>\n        <input type="hidden" name="item_id" value="',itemId,'"/>\n        <input type="hidden" name="item_num_id" value="',item.itemNumId,'"/>\n        <input type="hidden" name="tks" value="" />\n        <input type="hidden" id="sku-id" name="skuId" value=""/>\n        <input type="hidden" name="buyNow" value="true" />\n    </form>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_info"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<section class="d-info">\n    <h1 class="title" id="J-desc"></h1>\n    <ul class="d-cul">\n	  <li class="d-price"><label>价格:</label><ins class="red dc-origin">￥',info.price,"</ins></li>\n\n"),info.delivery.deliveryFeeType!=0&&(__p.push('\n	  <li class="dc-area"><label>运费:</label>\n      '),info.delivery.deliveryFeeType==2?__p.push("\n          ",info.delivery.title,"\n      "):info.delivery.deliveryFeeType==1&&__p.push('\n		<span class="dc-delivery"> ',_.map(info.delivery.deliveryFees,function(e){return e.title}).join(" "),"</span>\n      "),__p.push("\n\n      "),mallInfo&&mallInfo.allAreaSold==0?__p.push('\n            <span class="font12 di-gy di-adsxg"><span class="dia-city" c="areaId">',info.delivery.destination,'</span><b class="aw down"></b></span>\n         '):info.delivery.deliveryFeeType!=2&&__p.push('\n            <span class="font12"> 至 <span class="di-gy">',info.delivery.destination,"</span></span>\n      "),__p.push("\n      </li>\n      "),mallInfo&&mallInfo.allAreaSold==0&&__p.push('\n        <li class="di-area none"> <div class="c-loading"><span></span></div></li>\n      '),__p.push("\n\n\n")),__p.push("\n	    <li><label>月销:</label>",info.totalSoldQuantity,"件</li>\n    </ul>\n</section>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_info2"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="tbh5v0">\n<section id="J_detailCont" class="innercontent">\n    <section id="J_slide">\n\n    </section>\n    <section class="d-info">\n        <h1><em class="red">[1111购物狂欢节]</em>ForeverKid 秋装新款韩国奢华金线刺绣气质全网纱蕾丝双排扣风衣</h1>\n        <ul class="d-cul">\n            <li class="dic-fli">\n                <label>促销:</label><ins class="red dc-promo">￥249.00 </ins><span class="gray12"><span class="di-org">1212淘你喜欢</span></span><!--<img src="http://a.tbcdn.cn/mw/app/detail/wap/images/chuxiao-49-17.png" width="49" height="17" /><ins class="red dc-promo">￥9999999.00 - ￥9999999.00</ins><span class="gray12"><span class="di-org">限时打折</span>  剩余19小时25分钟</span>-->\n            </li>\n            <li>\n                <label>原价:</label><span class="gray12"><del class="dc-origin">￥358.00</del>每个id限购1件</span>\n            </li>\n\n\n            <li class="dc-area">\n                <label>快递:</label><span class="dc-delivery">￥6.00</span> <span class="font12 di-gy di-adsxg"><span class="dia-city" c="330100">杭州</span><b class="aw down"></b></span>\n            </li><!--不是地区限购html "<span class="font12">从 <span class="di-gy">海外美国</span> 至 <sp1an class="di-gy">浙江杭州</span></span>"-->\n            <li class="di-area none">\n                <div class="c-loading">\n                    <span></span>\n                </div>\n            </li>\n            <!--<li class="di-area">\n                <p class="red">以下地区有售</p>\n                <div class="di-arealist">\n                    <i>北京</a><i>天津</i><i>新疆</i><i>河北</i><i>黑龙江</i><i>吉林</i><i>内蒙古</i><i>江苏</i><i class="sel">浙江</i><span class="di-alinsert"><b class="sel">杭州</b><b>宁波</b><b>温州</b><b>嘉兴</b><b>绍兴</b><b>舟山</b><b>丽水</b><b>衢州</b><b>金华</b></span><i>湖南</i><i>湖北</i><i>西藏</i>\n                </div>\n                <div class="dsm-f"><a href="#" class="dsmf-a"><b class="aw up"></b></a></div>\n            </li>-->\n            <li><label>月销:</label>3568 件 <span id="J_integral" class="gray12">单件送200积分</span></li>\n        </ul>\n\n\n\n\n    </section>\n    <section class="d-sku d-tmall"><!--天猫增加d-tmall-->\n        <!--<p class="dst-sep">特色服务：<span class="gray12">冰箱食物补偿金</span><em class="red">商家赠送</em></p>-->\n        <p class="ds-props" id="sku-limit"><span class="ds-skup">尺码</span>:　<span class="gray12">M　L　XL　XXL　颜色: 半身渐变蓝 全身黑 半身紫</span><b class="aw down"></b></p>\n        <div class="ds-main none" id="sku-all">\n            <!--<p class="dsm-s">请选择 <span class="red">尺码/颜色</span></p>\n            <div class="dsm-p">\n                <p class="dsmp-n">尺码:</p>\n                <div class="dsmp-v">\n                    <i class="a sel" data-id="" data-img="">S</i><i class="a" data-id="" data-img="">M</i><i class="a" data-id="" data-img="">L</i><i class="a" data-id="" data-img="">XL</i><i class="a" data-id="" data-img="">XXL</i>\n                </div>\n            </div>\n            <div class="dsm-p">\n                <p class="dsmp-n">颜色分类:</p>\n                <div class="dsmp-v">\n                    <i data-id="" class="b" data-img="">红色</i><i class="b" data-id="" data-img="">橙色</i><i class="b" data-id="" data-img="">黄色</i><i class="b" data-id="" data-img="">灰色</i><i class="b" data-id="" data-img="">黑色</i><i class="b" data-id="" data-img="">货色</i><i data-id="" class="b" data-img="">货色</i><i class="b" data-id="" data-img="">货色</i><i data-id="" class="b" data-img="">货色</i><i class="b" data-id="" data-img="">货色</i>\n                </div>\n            </div>\n            <p class="dsm-sel">已选："红色" 还未选 <em class="red">尺码</em></p>\n            <p class="dst-sep">特色服务：<span class="gray12">冰箱食物补偿金</span></p>\n            <p class="dsm-lap">促销：<em class="red">￥249.00</em>(库存10件)</p>\n            <div class="dsm-f"><a id="sku-drow" href="#" class="dsmf-a"><b class="aw up"></b></a></div>-->\n        </div>\n    </section>\n    <section class="d-sure">\n        <div class="ds-action">\n            <a href="#" class="ds-coma ww">\n                <img src="http://im.m.taobao.com/ww/status.do?_input_charset=utf-8&amp;nick=%E5%A5%A5%E6%84%8F%E7%8E%9B%E6%97%97%E8%88%B0%E5%BA%97&amp;sid=a43dc100fd92d4d3f446405857471d10" alt="联系卖家">\n            </a>\n            <a href="#" class="ds-coma fav">收藏</a>\n            <a href="#" class="c-btn-oran immbuy"><span>立即购买</span></a>\n            <a href="#" class="c-btn-blue addcart"><span>加入购物车</span></a>\n            <!--<b id="J_NoArea" class="ds-coma ds-bs"><span>商品不在销售区域内</span></b><b class="ds-coma ds-bs ds-bs12"><span><em class="red">还有机会</em> 我们会逐步取消未支付订单</span></b><a class="ds-coma ds-rh" href="#"><img src="images/refresh.png" />刷新</a>--><!--天猫样式c-btn-tmall-buy-->\n            <!-- 拇指斗价按钮 -->\n            <!--<a href="#" class="mz-btn mz-buy">立刻购买</a>\n            <a href="#" class="mz-btn mz-join">参与斗价</a>\n            <a href="#" class="mz-btn mz-ended">已经结束</a>\n            <a href="#" class="mz-btn mz-soldout">卖光了</a>\n            <a href="#" class="mz-btn mz-success">已成功抢购</a>\n            <a href="#" class="mz-btn mz-topay">待付款</a>\n            <a href="#" class="mz-btn mz-chance">还有机会</a>\n            <a href="#" class="mz-btn mz-tostart">即将开始</a>\n            <a href="#" class="mz-btn mz-closed">交易关闭</a>-->\n\n            <form id="order-form" name="orderForm" style="display: none;" action="http://b.m.taobao.com/buy.htm?sid=fa5ef1c3e6848fa9433c0ebf894b1e5a&amp;pds=buynow%23h%23detail" method="post">\n                <input type="hidden" name="_input_charset" value="utf-8"/>\n                <input type="hidden" name="item_id" value="4846668057"/>\n                <input type="hidden" name="item_num_id" value="4846668057"/>\n                <input type="hidden" name="tks" value="" />\n                <input type="hidden" id="sku-id" name="skuId" value=""/>\n                <input type="hidden" name="buyNow" value="true" />\n            </form>\n        </div>\n\n\n\n    </section>\n\n    <!--值得买区块-->\n\n\n\n    <section class="d-master">\n\n        <div id="zdm-comment" class="zdm-comment">\n           <h2>用户评论</h2>\n           <ul class="zdm-comment-block">\n               <li class="z-mod">\n                  <div class="hd">\n                    <img src="http://img04.taobaocdn.com/tps/i4/T12.4VXwpbXXbe.mPe-40-40.png"/>\n                  </div>\n                  <div class="bd">\n                     <h3><a href="#">小猪LULU</a></h3>\n                     <p>颜色特别美，做工特别好，潘领好可爱。。设计感很足。好喜欢。。我穿已经在膝盖了。。囧···哈哈。。但还是爱不释手啊。。</p>\n                     <ul class="pic-desc">\n                          <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                          <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                          <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                          <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                          <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                     </ul>\n                  </div>\n               </li>\n               <li class="z-mod">\n                 <div class="hd">\n                   <img src="http://img04.taobaocdn.com/tps/i4/T12.4VXwpbXXbe.mPe-40-40.png"/>\n                 </div>\n                 <div class="bd">\n                    <h3><a href="#">小猪LULU</a></h3>\n                    <p>颜色特别美，做工特别好，潘领好可爱。。设计感很足。好喜欢。。我穿已经在膝盖了。。囧···哈哈。。但还是爱不释手啊。。</p>\n                    <ul class="pic-desc">\n                         <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                         <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                         <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                         <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                         <li><img src="http://img04.taobaocdn.com/tps/i4/T1mNFVXxlcXXXeF16k-62-62.png"/></li>\n                    </ul>\n                 </div>\n              </li>\n              <li class="z-mod">\n                   <div class="hd">\n                     <img src="http://img04.taobaocdn.com/tps/i4/T12.4VXwpbXXbe.mPe-40-40.png"/>\n                   </div>\n                   <div class="bd">\n                      <h3><a href="#">小猪LULU</a></h3>\n                      <p>颜色特别美，做工特别好，潘领好可爱。。设计感很足。好喜欢。。我穿已经在膝盖了。。囧···哈哈。。但还是爱不释手啊。。</p>\n\n                   </div>\n               </li>\n           </ul>\n\n        </div><!--值得买评论区块-->\n\n\n        <p class="dm-cp"><a href="#!comment">用户评论（8586）</a><b class="aw right"></b></p>\n        <p class="dm-cp"><a href="#!imaget">图文详情（总12页）</a><b class="aw right"></b></p>\n        <div class="dm-cdiv">\n            <em class="di-org">满就送</em>\n            <p class="dh-fsp">满158元 ，免运费 (不免邮地区:海南;甘肃;青海;宁夏;新疆;四川;贵州;云南;西藏;香港)；满268元 ，减5元；满378元 ，减10元。</p>\n        </div>\n        <ul class="d-cul">\n            <li class="dmf-li"><label>卖家:</label><span class="dm-name">新博来珀珈琬之娜迪欧新博来珀珈琬之娜迪欧</span><img src="http://a.tbcdn.cn/mw/s/hi/tbtouch/icons/rank/b_2_4.gif" alt=""></li>\n            <li><label>地点:</label><span class="gray12">浙江 杭州</span></li>\n            <li><label>动态:</label><span class="gray12">描述 <i class="red">4.7</i> 服务 <i class="red">4.8</i> 物流 <i class="red">4.6</i>　好评率 98.7%</span></li>\n            <li><label>保障:</label><img src="http://a.tbcdn.cn/mw/s/hi/tbtouch/icons/trade/xb_quality_item.png"><img src="http://a.tbcdn.cn/mw/s/hi/tbtouch/icons/trade/xb_sevenday_return.png"><img src="http://a.tbcdn.cn/mw/s/hi/tbtouch/icons/trade/xb_truth.png"></li>\n        </ul>\n        <p class="dm-enter dm-five"><a href="#">进入店铺</a></p>\n    </section>\n    <section class="d-hot">\n        <ul>\n            <li><em>Hot</em><a href="#">七夕节店铺大优惠</a></li>\n            <li><em>Hot</em><a href="#">五一西湖的雨，全场5折，单品包邮</a></li>\n        </ul>\n    </section>\n    <section id="J_recommend" class="d-tj">\n        <!--<div class="dt-header none">\n            <h3>本店推荐宝贝</h3>\n            <a href="#">更多</a>\n        </div>\n        <div id="tjSlider" class="tjSlider none">\n            <div class="tjSlider-outer">\n                <ul>\n                    <li>\n                        <a href="#">\n                            <img src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif" dataimg="images/tj1.jpg" />\n                            <span>爱丽缇2012夏装新款明星同款白色款白色款白色</span>\n                            <p><ins class="red">￥249.00</ins></p>\n                            <p class="font12">原价:<del>￥358.00</del></p>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="#">\n                            <img src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif" dataimg="images/tj2.jpg" />\n                            <span>爱丽缇2012夏装新款明星同款白色款白色款白色</span>\n                            <p><ins class="red">￥243419.00</ins></p>\n                            <p class="font12">原价:<del>￥358.00</del></p>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="#">\n                            <img src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif" dataimg="images/tj1.jpg" />\n                            <span>爱丽缇2012夏装新款明星同款白色款白色款白色</span>\n                            <p><ins class="red">￥249.00</ins></p>\n                            <p class="font12">原价:<del>￥358.00</del></p>\n                        </a>\n                    </li>\n                    <li>\n                        <a href="#">\n                            <img src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif" dataimg="images/tj2.jpg" />\n                            <span>爱丽缇2012夏装新款明星同款白色款白色款白色</span>\n                            <p><ins class="red">￥243419.00</ins></p>\n                            <p class="font12">原价:<del>￥358.00</del></p>\n                        </a>\n                    </li>\n                </ul>\n            </div>\n            <b class="aw left prev">上一个</b>\n            <b class="aw right next">下一个</b>\n        </div>-->\n    </section>\n    <section class="d-search">\n        <form action="http://s.waptest.taobao.com/search.htm?v=0&amp;sid=adf3a2909bff87c3&amp;pds=search%23h%23detail" method="get" name="qsearch">\n            <input name="atype" type="hidden" value="b">\n            <input type="hidden" value="3" name="searchfrom">\n            <input type="text" name="q" placeholder="请输入宝贝关键字" class="bton-keyword" value="">\n            <input class="bton-search" name="search-bton" type="submit" value="">\n        </form>\n        <!--<input type="text" name="q" class="bton-keyword" value="" /><input class="bton-search" name="search-bton" type="submit" value="">-->\n    </section>\n </section>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<section id="J_detailCont" class="innercontent">\n\n\n       <section id="J_slide"><div class="loading"></div></section>\n\n       <section id="J-dInfo" class="fold"></section>\n\n       <section id="J-dSKU"> </section>\n\n\n       <section class="d-sure" id="J-orderNow"> </section>\n\n       <section class="d-master">\n\n           <div id="zdm-comment" class="zdm-comment"><div class="loading"></div></div><!--值得买评论区块-->\n\n           <div id="J-merchant"> </div>  <!--merchant info-->\n\n       </section>\n       <section class="d-search">\n           <form action="http://s.waptest.taobao.com/search.htm?v=0&amp;sid=adf3a2909bff87c3&amp;pds=search%23h%23detail" method="get" name="qsearch">\n               <input name="atype" type="hidden" value="b">\n               <input type="hidden" value="3" name="searchfrom">\n               <input type="text" name="q" placeholder="请输入宝贝关键字" class="bton-keyword" value="">\n               <input class="bton-search" name="search-bton" type="submit" value="">\n           </form>\n           <!--<input type="text" name="q" class="bton-keyword" value="" /><input class="bton-search" name="search-bton" type="submit" value="">-->\n       </section>\n   </section>\n</section>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_merchant"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<p class="dm-cp"><a href="#" id="J-goToComment">用户评论</a><b class="aw right"></b></p>\n<p class="dm-cp"><a href="#" id="J-goToView">图文详情</a><b class="aw right"></b></p>\n\n<ul class="d-cul">\n    <li class="dmf-li"><label>卖家:</label><span class="dm-name">',seller.nick,'</span><img src="',app.helper.convertCredit(seller.credit.level),'"/></li>\n    <li><label>地点:</label><span class="gray12">',seller.location,'</span></li>\n    <li><label>动态:</label><span class="gray12">\n        '),seller.evaluateInfo&&seller.evaluateInfo.length==3&&__p.push('\n         描述 <i class="red">',seller.evaluateInfo[2].score,'</i> 服务 <i class="red">',seller.evaluateInfo[1].score,'</i> 物流 <i class="red">',seller.evaluateInfo[0].score,"</i>　\n        "),__p.push("好评率 ",seller.goodRatePercentage,"\n    </span></li>\n    "),guarantees&&guarantees.length&&(__p.push("\n    <li><label>保障:</label>"),_.each(guarantees,function(e){__p.push('\n    <img src="',e.icon,'_16x16.jpg" />\n    ')})),__p.push('</li>\n</ul>\n<p class="dm-enter dm-five"><a href="http://shop.',app.helper.fetchHost(),".taobao.com/shop/shopIndex.htm?user_id=",seller.userNumId,'">进入店铺</a></p>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_sku"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),item.sku=="true"&&(__p.push('\n<section class="d-sku'),seller.type=="B"&&__p.push(" d-tmall"),__p.push('">\n   <p class="ds-props" id="sku-limit">\n       <span class="gray12">\n           ',_.map(sku.skuProps,function(e){var t=_.map(e.values,function(e){return e.valueAlias||e.txt});return t.unshift(e.name+": "),t.join(" ")}).join(" "),'</span>\n       <b class="aw down"></b>\n   </p>\n   <div class="ds-main none" id="sku-all"></div>\n</section>\n')),__p.push("\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/detail_slider"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="sliderWrap" class="dSlider">\n    <div class="js-bton">\n        <a href="#" class="jsb-back" id="J-jsbBack">返 回</a>\n        <a href="#" class="jsb-ori">原 图</a>\n    </div>\n    <div class="goods-slider" id="J-sliderShow">\n        <ul>\n            '),_.each(sliders,function(e){__p.push('\n              <li><img src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif"  class="lazy" data-src="',app.Util.getWebpImg(e,"180x180"),'" /></li>\n            ')}),__p.push('\n        </ul>\n    </div>\n    <b class="prev">上一个</b>\n    <b class="next">下一个</b>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/error_no_item"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="c-msg">\n   <div class="c-msg-img error"></div>\n   <div class="c-msg-info">\n    <p>温馨提示</p>\n    <p><br/>很抱歉，您查看的宝贝不存在，可能已下架或被转移<br/></p>\n   </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/error_no_order"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="c-msg">\n   <div class="c-msg-img error"></div>\n   <div class="c-msg-info">\n    <p>温馨提示</p>\n    <p><br/>很抱歉，您当前没有任何商品订单<br/></p>\n   </div>\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/good_commentItem"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),comment&&(__p.push('\n<div class="comment-item">\n    <div class="hd">\n        <img src="http://wwc.taobaocdn.com/avatar/getAvatar.do?userId=',comment.raterUid,'&width=40&height=40&type=sns"/>\n    </div>\n    <div class="bd">\n        <h3>',comment.raterUserNick,"</h3>\n        <p>",_.escape(comment.feedback),'</p>\n        <ul class="pic-desc">\n            '),_.each(comment.feedItemPicDOList,function(e){__p.push('\n               <li><img src="',e.path,'_60x60.jpg"/></li>\n            ')}),__p.push("\n        </ul>\n    </div>\n</div>\n")),__p.push('\n<div class="ft comment-ft">'),comment?__p.push('<a class="fn view-comments" href="#">查看全部评论<em></em></a>'):__p.push('<a href="#" class="fn J-addPic" onclick="">添加图片及评论<em></em></a>'),__p.push("</div>\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/good_item"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push(""),_.each(goods,function(e){__p.push("\n    "),_.each(e.orderInfo.orderCell,function(t){__p.push('\n    <li class="z-mod" id="J-commentItem-',e.orderInfo.bizOrderId,"-",t.itemId,'" data-orderId="',e.orderInfo.bizOrderId,'" data-id="',e.orderInfo.bizOrderId,"-",t.itemId,'" data-ratedUid="',e.sellerInfo.sellerId,'" data-itemId="',t.itemId,'"    data-tradeId="',t.orderId,'" data-parentTradeId="',e.orderInfo.bizOrderId,'">\n        <div class="good-item">\n            <div class="hd good-hd">\n                <a href="#detail/',t.itemId,'"><img src="',t.pic,'"/></a>\n            </div>\n            <div class="bd good-bd">\n                 <p><a href="#detail/',t.itemId,'">',_.escape(t.title),'</a></p>\n                 <div class="price">￥',t.sPrice,'</div>\n            </div>\n        </div>\n        <div id="J-comment-',e.orderInfo.bizOrderId,"-",t.itemId,'"> </div>\n    </li>\n    ')}),__p.push("\n")}),__p.push("\n\n");return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/good_layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div id="J-myGood" style="height:300px;">\n\n    <ul class="good-block" id="J-goodList">\n\n        <div class="loading"></div>\n\n    </ul>\n\n    <div id="J-goodsPage" class="c-pnav-con"></div>\n\n</div>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/imaglet"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<section class="innercontent">\n    <div id="J_imagetCont">\n        <div id="J_imagetCont_ic" class="it-cont"></div>\n        <div id="J_icpage" class="c-pnav-con"></div>\n    </div>\n    <div id="J_param" class="it-param none">\n        <div id="J_paload" class="c-loading dc-load">\n            <span></span>\n        </div>\n   </div>\n</section>\n');return __p.join("")}}.call(this),function(){this.JST||(this.JST={}),this.JST["template/viewall_layout"]=function(obj){var __p=[],print=function(){__p.push.apply(__p,arguments)};with(obj||{})__p.push('<div class="good-section">\n    <div class="z-mod">\n        <div class="good-item">\n            <div class="hd good-hd">\n                <a href="#detail/',good.aucNumId,'"><img src="',good.auctionPicUrl,'"/></a>\n            </div>\n            <div class="bd good-bd">\n                <p><a href="#detail/',good.aucNumId,'">',good.auctionTitle,'</a></p>\n                <div class="price">￥',good.auctionPrice,'</div>\n            </div>\n        </div>\n    </div>\n</div>\n<p class="comments-num"><em></em><a href="#" id="J-gotoMy">发表你的购物体验，赢取奖励!</a></p>\n<div class="comment-section" id="zdm-comment">\n    <ul>\n    '),_.each(comments,function(e){__p.push('\n    <li class="z-mod">\n        <div class="hd">\n            <img src="http://wwc.taobaocdn.com/avatar/getAvatar.do?userId=',e.raterUid,'&width=40&height=40&type=sns"/>\n        </div>\n        <div class="bd">\n            <h3>',e.raterUserNick,"</h3>\n            <p>",e.feedback,'</p>\n            <ul class="pic-desc">\n                '),_.each(e.feedItemPicDOList,function(e){__p.push('\n                <li><img src="',e.path,'_60x60.jpg"/></li>\n                ')}),__p.push("\n            </ul>\n        </div>\n    </li>\n\n    ")}),__p.push('\n    </ul>\n</div>\n<div id="J-allComments" class="c-pnav-con"></div>\n');return __p
.join("")}}.call(this),function(e,t){var n=e.page.define({name:"detail",title:"宝贝详情",route:"detail/(P<id>\\d+)",templates:{layout:JST["template/detail_layout"],slider:JST["template/detail_slider"],orderNow:JST["template/detail_extra"],info:JST["template/detail_info"],comments:JST["template/comment_item"],merchant:JST["template/detail_merchant"],item_non_existent:JST["template/error_no_item"]},buttons:[{type:"back",text:"返回"}],ready:function(){var t=this,n=$(e.component.getActiveContent());n.html(t.templates.layout()),e.Util.Events.call(this,"body",this.events),this.queryData()},events:{"click .goods-slider li img":"fullscreen","click #J-jsbBack":"recover","click #J-cBack":"recover1","click .jsb-ori":"original","click #J-goToComment":"goToComment","click #J-goToView":"goToView","click .immbuy":"immediatelyBuy","click #zdm-comment .pic-desc li":"showCommentPicSlider"},recover1:function(e){e.preventDefault(),$(".viewport").show(),$("#tbh5v0 .dSliderFull").remove()},showCommentPicSlider:function(e){e.preventDefault();var t=e.currentTarget,n=$(t).parents(".pic-desc").clone();$("#tbh5v0").addClass("fullscreen");var r=$('<div class="dSliderFull"></div>');r.html('<div class="dSlider" id="J-sliderComment"><div class="js-bton"><a href="#" class="jsb-back" id="J-cBack">返 回</a></div><div id="t"></div></div>'),r.find("#t").html(n),$("#tbh5v0").append(r),$(".viewport").hide(),$("#t li img").each(function(){var e=$(this).attr("src");$(this).attr("src",e.replace("60x60.jpg","300x300.jpg"))});var i=new Swipe($("#t")[0],{fixWidth:300});i.element.style.marginLeft=0,i.setup(),i.begin()},commonDecide:function(t){if(this.soldAreas&&!$(".dia-city").attr("c"))return notification.flash("请选择所在城市").show(),null;if(e.ZDMDetail.hasProps&&$("#sku-id").val()==""){var n=$(".dsm-sel em"),r=$(".dsm-s em").html(),i=n&&n.html()||r;return i="请选择 "+i,notification.flash(i).show(),$("#sku-limit").trigger("click"),null}return!0},immediatelyBuy:function(e){e.preventDefault();if(!this.commonDecide())return;$("#order-form").submit()},addToCart:function(e){if(!e.item.quantity||e.item.quantity<=0){var t=$(".d-sure .immbuy");if(t.length){var n=t.parent(),r=t.next();t.remove(),r.hasClass("addcart")&&r.remove(),n.append('<b id="J_NoArea" class="ds-coma ds-bs"><span>商品已售完</span></b>')}}else{var i=$("#J_NoArea");if(i.length){var n=i.parent();i.remove(),n.append('<a href="#" class="'+(that.tmall&&"c-btn-tmall-buy"||"c-btn-oran")+' immbuy"><span>立即购买</span></a><a href="#" class="c-btn-blue addcart"><span>加入购物车</span></a>')}}},goToComment:function(t){t.preventDefault(),e.navigation.push("#comment/"+this.itemQid)},goToView:function(t){t.preventDefault(),e.navigation.push("#imaglet/"+this.itemQid)},setImg:function(t){var n=this.slideEl,r=n.find("li img");r.each(function(n,r){var r=$(r),i=r.attr("src"),s=r.attr("data-src"),o=e.Util.getWebpImg(s,t);r.attr("data-src",o),r.attr("src",o)})},fullscreen:function(e){scrollTo(0,0);var t=this.detailSlider;this.slideEl||(this.slideEl=$("#J_slide")),this.body||(this.body=$("#tbh5v0")),this.hideEle||(this.hideEle=this.body.children()),this.slideEl.appendTo(this.body).addClass("dSliderFull"),this.hideEle.addClass("none"),this.body.addClass("fullbody"),t.fixWidth=300,t.element.style.marginLeft=0,t.setup(),t.begin(),this.setImg("300x300"),$(".price-f").hide(),this.isFulls=!0},recover:function(e){e.preventDefault(),this.slidePar||(this.slidePar=$("#J_detailCont").children()[0]),this.slideEl.insertBefore(this.slidePar).removeClass("dSliderFull"),this.hideEle.removeClass("none"),this.body.removeClass("fullbody"),$(".price-f").show();var t=this.detailSlider;t.fixWidth=200,t.element.style.marginLeft="58px",t.setup(),t.begin(),this.setImg("180x180"),this.isFulls=!1},original:function(e){e.preventDefault();var t=$("#J-sliderShow").find("li img");location.href=$(t[this.detailSlider.index||0]).attr("src")},queryData:function(){var t=this,n=$(e.component.getActiveContent()).find("#J_detailCont");this.itemQid=id=e.navigation.getParameter("id"),e.mtopH5Api.getApi("mtop.wdetail.getItemDetail","3.0",{itemNumId:id},{},function(e){if(e.ret&&e.ret[0]=="SUCCESS::调用成功"&&e.data){var r=e.data.item;r&&r.h5Common&&r.h5Common=="true"?t.render(e):(console.log("本应用暂不支持该宝贝"),t.render(e))}else e.ret[0].indexOf("ERRCODE_QUERY_DETAIL_FAIL")>-1&&n.html(t.templates.item_non_existent())},function(){notification.flash("请求失败，请重试").show()})},queryDesc:function(){e.mtopH5Api.getApi("mtop.gene.feedCenter.getConfigByItemId","1.0",{aucNumId:this.itemQid},{},function(e){e.ret&&e.ret[0]=="SUCCESS::调用成功"&&e.data?$("#J-desc").html(e.data.result):notification.flash("请求商品简介失败").show()})},render:function(t){var n=t.data;e.helper._parseDetailJson(n);var r=e.ZDMDetail,i=this.templates.slider({sliders:r.images,info:r.info});$("#J_slide").html(i);var s=this.templates.info({info:r.info,mallInfo:r.mallInfo});$("#J-dInfo").html(s);var o=this.templates.merchant({evaluateCount:r.info.evaluateCount,itemId:r.itemId,seller:r.seller,guarantees:r.guarantees});$("#J-merchant").html(o);var u=this.templates.orderNow({itemId:r.itemId,item:r.info,trade:r.trade,seller:r.seller});$("#J-orderNow").html(u),this.detailSlider=new Swipe($("#J-sliderShow")[0],{fixWidth:200,preload:4}),this.detailSlider.load(),this.queryDesc(),e.sku.init(r),this.addToCart(r),this.queryComment(r.seller.userNumId)},queryComment:function(t){var n=this,r={ratedUid:t,tradeId:"0",itemIds:this.itemQid,pageSize:"100",pageIndex:"1"},i=function(e){var t=e,n=[];_.each(t,function(e,r){e.feedItemPicDOList.length>=1&&n.length<=4&&(n.push(e),t.splice(r,1))});if(n.length<5)var r=t.slice(0,5-n.length),n=n.concat(r);return n};if(n.commentsFilterArr&&n.itemFilterId==n.itemQid){var s=n.templates.comments({comments:n.commentsFilterArr});$(e.component.getActiveContent()).find("#zdm-comment").html('<h2>用户晒单</h2><ul class="zdm-comment-block">'+s+"</ul>")}else e.mtopH5Api.getApi("mtop.gene.feedCenter.queryFeedItems","1.0",r,{},function(t){if(t.ret&&t.ret[0]=="SUCCESS::调用成功"&&t.data){var r=t.data.dataList;if(r.length<=0){$(e.component.getActiveContent()).find("#zdm-comment").html('<h2>用户晒单</h2><ul class="zdm-comment-block"><li class="no-sd">暂无晒单</li></ul>');return}n.comments=r,n.itemFilterId=t.data.data.aucNumId;var s=n.commentsFilterArr=i(r),o=n.templates.comments({comments:s});$(e.component.getActiveContent()).find("#zdm-comment").html('<h2>用户晒单</h2><ul class="zdm-comment-block">'+o+"</ul>")}else notification.flash("评论请求失败，请重试").show()})},unload:function(){}})}(window.app),function(e,t){Object.extend(e.helper,{fetchHost:function(){var e=location.host,t="m";return e.match("m.(taobao|tmall|etao|alibaba|alipay|aliyun)")||(e=="127.0.0.1"||e=="localhost"?t="m":e.match("(?:.*\\.)?waptest\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")?t="waptest":e.match("(?:.*\\.)?wapa\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*")&&(t="wapa")),t},_parseDetailJson:function(t){var n={},r=this.fetchHost(),i=t.item,s=t.priceUnits;n.item=i,n.itemId=i.itemNumId,n.images=i.picsPath,n.info={price:s?s[0].price:t.item.price,delivery:t.delivery,totalSoldQuantity:i.totalSoldQuantity,soldout:i.soldout,evaluateCount:i.evaluateCount},n.trade=t.trade,n.seller=t.seller,n.guarantees=t.guarantees,n.tmall=t.seller.type=="B",n.taoPlus=!0,n.isIpad=!1,n.hasProps=t.item.sku=="true",n.taoPlus=!0;var o=n.itemId;n.loginUrl="http://login."+r+".taobao.com/login.htm",n.recommendAjaxUrl="http://a."+r+".taobao.com/ajax/wap_recommend.do?item_id="+o,n.shopAuctionSearchUrl="http://shop."+r+".taobao.com/shop/shop_auction_search.htm?suid="+t.seller.userNumId,n.tmallChangeLocationAjaxUrl="http://a."+r+".taobao.com/ajax/tmall_change_location.do?item_id="+o,n.addFavUrl="http://fav."+r+".taobao.com/favorite/to_collection.htm?itemNumId="+o+"&xid=0db2&pds=addfav%23h%23detail",n.cleannowUrl="http://d."+r+".taobao.com/my_cart.htm?pds=cleannow%23h%23cart",n.myCartUrl="http://d."+r+".taobao.com/my_bag.htm?pds=gotocart%23h%23detail",n.mallInfo=t.mallInfo,t.mallInfo&&(n.soldAreas=t.mallInfo.soldAreas);if(n.hasProps){var u={};u.skuProps=[];var a=t.sku.props,f,l,c,h;for(var p=0,d=a.length;p<d;p++){f=a[p].propId,l=a[p].values,c={},c.name=a[p].propName,c.values=[];for(var v=0,m=l.length;v<m;v++)h={},h.id=[f,":",l[v].valueId].join(""),h.txt=l[v].valueAlias||l[v].name,l[v].imgUrl&&(h.img=l[v].imgUrl),c.values[v]=h;u.skuProps[p]=c}var g=t.sku.skus,y={},b;for(var w=0,E=g.length;w<E;w++)g[w].quantity>0&&(b={},b.quantity=g[w].quantity,b.skuId=g[w].skuId,g[w].priceUnits?g[w].priceUnits.length>1?(b.promoPrice=g[w].priceUnits[0].price,b.price=g[w].priceUnits[1].price):b.price=g[w].priceUnits[0].price:b.price=g[w].price||"",y[g[w].ppath]=b);u.availSKUs=y,n.skuData=u}e.ZDMDetail=n},convertCredit:function(e){var t="http://a.tbcdn.cn/mw/s/hi/tbtouch/icons/rank/b_";return t+=Math.ceil(e/5),t+="_",t+=e%5||5,t+=".gif",t}})}(window.app),function(e,t){e.sku={init:function(t){this.isIpad=t.isIpad,this.isJu=null,this.el=$(".d-sku"),this.template=JST["template/detail_sku"],$("#J-dSKU").html(this.template({item:t.item,seller:t.seller,sku:t.skuData})),this.skuId=$("#sku-id"),this.skuLimit=$("#sku-limit"),this.skuAll=$("#sku-all"),this.porigin=$(".dc-origin");var n=$(".dc-promo");this.ppromo=n.length&&n||null,n=this.ppromo;var r=n&&n.find(".coins");this.tjbText=r&&r.length&&" "+r.text()||"",this.priceori=this.porigin.html(),this.priceomo=n&&n.html(),this.promoTxt=n&&n.prev()&&n.prev().text().slice(0,-1)||"价格",this.firstLoad=!0;var i=t.skuData||{};this.skuProps=i.skuProps||[],this.availSKUs=i.availSKUs||{},e.Util.Events.call(this,"#tbh5v0",this.events),this.skuProps.length&&this.render()},events:{"click #sku-drow":"fold","click #sku-limit":"unfold","click .dsmp-v i":"select"},resize:function(t){var n=this,r=n.skuAll,i=function(){n.width=r.width()+10,t&&t.call(n),n.height=r.height()};r.hasClass("none")?e.Util.getActualSize(r,i):i()},contract:function(){var t=this,n=this.skuLimit,r=t.skuAll;t.skuSel=$(".dsm-sel"),t.skuLap=$(".dsm-lap"),t.skuSep=$(".dst-sep"),t.resize(t.adjust),e.Util.resize(function(){r.hasClass("none")?t.resize(t.setImgEle):(t.height=r.height(),t.width=r.width()+10,t.setImgEle())})},unfold:function(e){var t=this,n=e&&typeof e=="string"&&e=="noScroll",r=t.skuLimit,i=t.skuAll,s=t.height;if(r.hasClass("none"))return;!n&&scrollTo(0,r.offset().top-58),$("#J-dInfo").removeClass("fold"),r.addClass("none"),i.css("height",28).removeClass("none").css("height","auto")},fold:function(e){e.preventDefault();var t=this,n=t.skuLimit,r=t.skuAll,i=t.height;$("#J-dInfo").addClass("fold"),setTimeout(function(){scrollTo(0,r.offset().top-58)},200),r.css("height",i).css({height:28}),n.removeClass("none"),r.addClass("none").css("height","auto")},showImg:function(e){function t(e){var t=e.next();return t.length==0?null:t.hasClass("last")?t:arguments.callee(t)}var n;e.hasClass("last")?n=e:n=t(e);if(!n)return;var r=e.attr("data-img"),i=e.parent().find(".ds-insert"),s=i&&i.find("img"),o=i&&i.find("span");if(!r){i.hide();return}r+="_120x120.jpg",o&&o.removeClass("none"),i.length==0?(n.after('<span class="ds-insert c-loading"><span></span><img src="'+r+'" /></span>'),i=n.next(),s=i.find("img"),o=i.find("span"),s[0].onload=function(){$(this).animate({opacity:1},200,"linear"),o.addClass("none")}):(n.after(i),i.show(),s.attr("src",r)),this.cacheSrc!=r?(s.css({opacity:0}),this.cacheSrc=r):o.addClass("none")},select:function(e){e.preventDefault();var t=this;$target=$(e.target);if($target.hasClass("disabled"))return;t.skuId.val(""),$target.hasClass("sel")?($target.removeClass("sel"),$target.parent().find(".ds-insert").hide()):($target.addClass("sel"),$target.siblings().removeClass("sel"),t.showImg($target)),t.notice(),t.disable()},notice:function(){var e=$(".sel"),t=e.length,n=this.skuProps.length,r=this.skuSel,i=this.skuSep,s=this.skuLap,o=this.skuAll,u=[],a=[],f;e.each(function(e,t){u.push($(t).parent().prev().text().replace(":","")),a.push($(t).text())}),f=_.difference(this.propsName,u);var l="",c="",h=this.priceori,p=this.priceomo,d=this.tjbText;if(t==0)r.addClass("none");else if(t==n){l="已选："+_.map(a,function(e){return'"'+e+'"'}).join(" ");var v=_.map(e,function(e){return e.getAttribute("data-id")}),m=this.availSKUs[v.join(";")];c=this.promoTxt+'：<em class="red">￥'+(m.promoPrice||m.price)+d+"</em>"+(!this.isJu&&"(库存"+m.quantity+"件)"||""),h="￥"+m.price,p=m.promoPrice&&"￥"+m.promoPrice||h,p+=d,s.removeClass("none"),this.skuId.val(m.skuId)}else l='已选："'+a.join(" ")+'" 还未选 <em class="red">'+f.join(" ")+"</em>",r.removeClass("none"),i.addClass("none"),s.addClass("none");r.html(l),s.html(c),this.porigin.html(p||h),this.ppromo&&this.ppromo.html(p),this.height=o.height()},disable:function(){var e=this;$props.removeClass("disabled");var t=$(".sel");if(t.length==0)return;if($(".dsmp-v").length==1)return;$props.each(function(){var t=$(this);if(t.hasClass("sel")){var n=t.parent().parent().siblings().find("i");n.each(function(r,i){var s=!1;for(var o in e.availSKUs)if(o.search(t.attr("data-id"))>-1&&o.search(n.eq(r).attr("data-id"))>-1){s=!0;break}s||n.eq(r).addClass("disabled")})}})},setImgEle:function(){var e=this.width,t=this.skuAll.find(".dsmp-v"),n,r,i,s;t.each(function(){n=$(this).find("i"),r=0;for(var t=0,o=n.length;t<o;t++)s=$(n[t]),r+=s.width()+10,s.removeClass("last"),r>e&&(i=s.prev(),i=i.hasClass("ds-insert")&&i.prev()||i,i.addClass("last"),r=s.width()+10);n.last().addClass("last")})},adjust:function(){$props=$(".dsmp-v i");var e,t;$props.each(function(){e=$(this),t=e.width(),t<32?e.addClass("a"):t<80?e.addClass("b"):t<138?e.addClass("c"):e.addClass("d")}),this.setImgEle()},render:function(){var e=this,t=e.skuProps;t.length?this.el.show():this.el.hide();var n=e.outputHtml(t);e.skuAll.html(n),e.firstLoad?(e.contract(),e.isIpad&&e.unfold("noScroll"),e.firstLoad=null):e.resize(e.adjust)},outputHtml:function(e){var t=this.propsName=_.pluck(e,"name"),n=['<p class="dsm-s">请选择 <em class="red">'+t.join("/")+"</em></p>"];for(var r=0,i=e.length;r<i;r++)n.push('<div class="dsm-p"><p class="dsmp-n">'+e[r].name+':</p><div class="dsmp-v">'),_.each(e[r].values,function(e){n.push('<i data-id="'+e.id+'" '+(e.img&&"data-img="+e.img+""||"")+">"+e.txt+"</i>")}),n.push("</div></div>");return n.push('<p class="dsm-sel none"></p><p class="dst-sep none">特色服务：<span class="gray12"></span></p><p class="dsm-lap none"></p>'),n.push('<div class="dsm-f"><a id="sku-drow" href="#" class="dsmf-a"><b class="aw up"></b></a></div>'),n.join("")},destroy:function(){this.skuId=this.skuLimit=this.skuAll=this.porigin=this.ppromo=this.skuSel=this.skuLap=this.skuSep=$props=null,this.remove()}}}(window.app),function(e,t){var n=e.page.define({name:"myGood",title:"我的商品",route:"my/p(P<pageNo>\\d+)",templates:{layout:JST["template/good_layout"],commentItem:JST["template/good_commentItem"],goodItem:JST["template/good_item"],no_order:JST["template/error_no_order"]},buttons:[{type:"back",text:"返回"}],events:{"click .J-addPic":"triggerUploader","click .view-comments":"gotoViewAll"},gotoViewAll:function(t){t.preventDefault();var n=$(t.currentTarget).parents(".z-mod"),r=n.attr("data-itemid"),i=n.attr("data-rateduid");e.navigation.push("viewAll/"+r+"/"+i+"/p1")},_queryComments:function(t,n,r){var i=this,s={ratedUid:"0",itemIds:t.join(","),pageSize:"150",pageIndex:"1"};e.mtopH5Api.getApi("mtop.gene.feedCenter.queryFeedItems","1.0",s,{},function(e){if(e.ret&&e.ret[0]=="SUCCESS::调用成功"&&e.data){var s=e.data.dataList;console.log(t),console.log(r),_.each(t,function(e,t){console.log(s);var o=_.where(s,{aucNumId:e,parentTradeId:r[t]}),u=o.length>0?o[0]:!1;$("#J-comment-"+n[t]).html(i.templates.commentItem({comment:u}))})}else notification.flash("请求商品评论失败，请刷新")},function(e){notification.flash("网络出错，请稍后再试!").show()})},loadGoodList:function(){var t=this,n=e.navigation,r=parseInt(n.getParameter("pageNo")),i=[],s=[],o=[];console.log(r);var u={fromIndex:(r-1)*15,toIndex:r*15};e.mtopH5Api.getApi("mtop.gene.feedCenter.queryOrderList","1.0",u,{},function(n){var r=$(e.component.getActiveContent()).find("#J-goodList"),u=n.ret[0];if(n.ret&&n.ret[0].indexOf("SUCCESS")>-1&&n.data){if(!n.data.result){r.html(t.templates.no_order());return}var a=n.data.result;r.html(t.templates.goodItem({goods:a})),$(".z-mod").each(function(e,t){i.push($(t).attr("data-itemId")),s.push($(t).attr("data-id")),o.push($(t).attr("data-orderId"))}),t._queryComments(i,s,o);var f=n.data.total?Math.ceil(n.data.total/15):3;t.pageNav=new PageNav({id:"#tbh5v0 #J-goodsPage",index:1,pageCount:f,objId:"p"})}else n.ret[0].indexOf("FAIL_SYS_SESSION_EXPIRED")>-1?notification.flash("请重新登录").show():notification.flash(u.split("::")[1]).show()},function(e){notification.flash("网络出错，请稍后再试!").show()})},_testCanUpload:function(){var e;if(navigator.userAgent.indexOf("OS")>-1){var t=navigator.userAgent,n=t.charAt(t.indexOf("OS")+3);e=n>=6}else e=!1;return e=!0,e},triggerUploader:function(t){t.preventDefault();var n=t.currentTarget,r=$(n).parents(".z-mod"),i=this._testCanUpload();i||alert("抱歉！您的手机浏览器暂不支持网页上传图片功能。"),e.ZDMData.ratedUid=r.attr("data-rateduid"),console.log(e.ZDMData),e.ZDMData.tradeId=r.attr("data-tradeid"),e.ZDMData.parentTradeId=r.attr("data-parentTradeId"),e.ZDMData.aucNumId=r.attr("data-itemId"),e.navigation.push("upload",{datas:{canUpload:i}})},ready:function(){var t=this,n=$(e.component.getActiveContent()),r=e.navigation;n.html(t.templates.layout()),e.Util.Events.call(this,"#tbh5v0",this.events),this.loadGoodList()},unload:function(){}})}(window.app),function(e,t){var n=e.page.define({name:"viewAll",title:"所有评论",route:"viewAll/(P<itemId>\\d+)/(P<ratedUid>\\d+)/p(P<pageNo>\\d+)",templates:{layout:JST["template/viewall_layout"]},buttons:[{type:"back",text:"返回"}],_queryComments:function(){var t=this,n=e.navigation.getParameter("pageNo"),r={ratedUid:this.ratedUid,tradeId:"0",itemIds:this.itemId,pageSize:"10",pageIndex:n||1},i=1;e.mtopH5Api.getApi("mtop.gene.feedCenter.queryFeedItems","1.0",r,{},function(n){if(n.ret&&n.ret[0]=="SUCCESS::调用成功"&&n.data){var r=n.data.dataList,s=t.templates.layout({good:n.data.data,comments:r});$(e.component.getActiveContent()).find("#J_viewAllLayout").html(s);var o=n.data.total;o<10?i=1:o==10&&n.data.hasNext=="true"?i=50:o<=10&&n.data.hasNext=="false"&&(i=1);var u=t.pageNav=new PageNav({id:"#J-allComments",index:1,pageCount:i,objId:"p"})}else notification.flash("评论请求失败，请重试").show()})},events:{"click #J-gotoMy":"gotoMyGood"},gotoMyGood:function(t){t.preventDefault(),e.navigation.push("my/p1")},triggerUploader:function(t){t.preventDefault(),$("#J-upload").trigger("click"),$("#J-upload").on("change",function(){e.navigation.push("upload",{datas:{picInput:$("#J-upload")}})})},ready:function(){var t=this,n=$(e.component.getActiveContent()),r=e.navigation;this.itemId=r.getParameter("itemId"),this.ratedUid=r.getParameter("ratedUid"),n.html('<section id="J_viewAllLayout" class="innercontent"></section>'),e.Util.Events.call(this,"#J_viewAllLayout",this.events),this._queryComments()},unload:function(){}})}(window.app),function(e,t){var n=e.page.define({name:"upload",title:"",route:"upload",templates:{layout:JST["template/add_pic"],commentItem:JST["template/comment_item"],goodItem:JST["template/good_item"]},buttons:[{type:"back",text:"返回"},{type:"func",text:"上传图片",handler:function(){$("#J-upload").val()==""?notification.flash("请上传图片或者回到我的商品页重新进行操作").show():$("#J-imgForm").submit()}}],events:{},triggerUploader:function(e){e.preventDefault()},ready:function(){var t=this,n=$(e.component.getActiveContent()),r=e.navigation;n.html(this.templates.layout()),e.Util.Events.call(this,"#J-uploader",this.events);if(e.navigation._cur.state.datas){var i=e.navigation.getData("canUpload");i||$("#J-addPicWrap").hide(),$("#J-ratedUid").val(e.ZDMData.ratedUid),$("#J-tradeId").val(e.ZDMData.tradeId),$("#J-parentTradeId").val(e.ZDMData.parentTradeId),$("#J-itemId").val(e.ZDMData.aucNumId)}var s=function(e){var t=e.val(),n=t.replace("/[^/x00-/xff]/g","**").length;$("#J-num").text(n),n>=140&&e.val(t.substr(0,140))};$("#J-upload").on("change",function(){$("#J-uploaderTrigger").hide(),$("#J-uploaded").show(),$("#J-upload").css({opacity:1}),$(".upload-btn").show()}),$("#J_CommentPoster").on("keyup paste",function(){s($(this))})},unload:function(){}})}(window.app),function(e,t){var n=e.page.define({name:"comment",title:"评论",route:"comment/(P<id>\\d+)",templates:{commetAllLayout:JST["template/detail_commentAllLayout"],commentItem:JST["template/comment"]},buttons:[{type:"back",text:"宝贝详情"}],ready:function(){var t=this;this.itemId=e.navigation.getParameter("id");var n=$(e.component.getActiveContent()),r=e.navigation.getParameter("id"),i=e.navigation.getParameter("pageNo"),s=e.helper.fetchHost();n.html(this.templates.commetAllLayout()),e.Util.Events.call(this,"#J_commentCont",this.events),this.typeg="good",this.url="http://a."+s+".taobao.com/ajax/rate_list.do",this.isFirst=!0,this.tabCache={good:{first:!0,second:1,page:1,total:0,sel:null,list:[]},ok:{first:!0,second:1,page:1,total:0,sel:null,list:[]},bad:{first:!0,second:1,page:1,total:0,sel:null,list:[]},addto:{first:!0,second:1,page:1,total:0,sel:null,list:[]}},this.fetch(r,i)},events:{"click #J_commtab li":"tabClick"},typeMap:{good:"1",ok:"0",bad:"-1",addto:"2"},typePonit:{good:"saygood#h#detail",ok:"saynormal#h#detail",bad:"saybad#h#detail",addto:"addsay#h#detail"},tabClick:function(e){e.preventDefault(),scrollTo(0,0);var t=this,n=$(e.currentTarget);if(n.hasClass("cur"))return;t.curLi||(t.curLi=n.parent().find("li.cur")),n.addClass("cur"),t.curLi.removeClass("cur"),t.curLi=n,t.typeg=n.attr("s");var r=t.tabCache[t.typeg];r.total&&t.pagebar.removeClass("none")||t.pagebar.addClass("none"),r.first=!0,t.getData(),utils.sendPoint(t.typePonit[t.typeg])},render:function(e,t){var n=this,r=n.tabCache[n.typeg],i=n.templates.commentItem(e);console.log(i),$("#J-detailCommentListAll").html(i),n.contbar||(n.contbar=$("#J_commcont")),n.loading||(n.loading=$("#J_listload")),n.pagebar||(n.pagebar=$("#J_dcpage")),n.loading.addClass("none")},fetch:function(e,t){var n=this;if(!e)return;n.itemId=e,n.xhr&&n.xhr.abort(),t=t||1;var r=n.url,i=r.indexOf("?")!=-1;r+=n.isFirst&&(i&&"&first=1"||"?first=1")||"",r+=[r.indexOf("?")!=-1&&"&"||"?","t="+Date.now()].join(""),n.xhr=$.ajax({url:r,data:{item_id:e,rateRs:n.typeMap[n.typeg],p:t,ps:10},dataType:"jsonp",success:function(e){e&&typeof e=="string"&&(e=e.replace(//gi,""),e=JSON.parse(e)),n.fetchAfter(e,t),n.xhr=null},error:function(){n.xhr=null,n.loading.addClass("none")}})},fetchAfter:function(t,n){console.log("fetchAfter");var r=this;if(t&&t.items&&t.items.length){r.render(t,n);if(!r.pageNav){var i=r.pageNav=new PageNav({id:"#tbh5v0 #J_dcpage",index:1,pageCount:t.total,disableHash:!0});i.$container.on("P:switchPage",function(e,t){r.getData(t.index),r.tabCache[r.typeg].page=t.index,t.type=="next"})}r.pagebar.removeClass("none")}else t&&$(e.component.getActiveContent()).find("#J_commentCont").html('<p class="itc-p">无评论</p>');r.isFirst=null},getData:function(e){var t=this,n=t.typeg,r=t.tabCache[n],i=r.list,s=e||r.page;e&&scrollTo(0,0),r.sel&&r.sel.addClass("none");if(i[s]){i[s].removeClass("none"),r.sel=i[s];if(r.first){r.first=null;var o=t.pageNav;if(!o)return;o.eventDetach(),o.init({index:s,pageCount:r.total,disableHash:!0})}}else t.pagebar.addClass("none"),t.loading.removeClass("none"),t.fetch(t.itemId,e)},unload:function(){this.pageNav&&this.pageNav.eventDetach(),this.pageNav=null,this.tabCache=null}})}(window.app),function(e,t){Object.extend(e.helper,{commentCreditToRank:function(e){var t=0;return e>=4&&e<=10?t=1:e>=11&&e<=40?t=2:e>=41&&e<=90?t=3:e>=91&&e<=150?t=4:e>=151&&e<=250?t=5:e>=251&&e<=500?t=6:e>=501&&e<=1e3?t=7:e>=1001&&e<=2e3?t=8:e>=2001&&e<=5e3?t=9:e>=5001&&e<=1e4?t=10:e>=10001&&e<=2e4?t=11:e>=20001&&e<=5e4?t=12:e>=50001&&e<=1e5?t=13:e>=100001&&e<=2e5?t=14:e>=200001&&e<=5e5?t=15:e>=500001&&e<=1e6?t=16:e>=1000001&&e<=2e6?t=17:e>=2000001&&e<=5e6?t=18:e>=5000001&&e<=1e7?t=19:e>=10000001&&(t=20),t},rank:function(e){var t=this.commentCreditToRank(e),n=["","颗心","颗黄钻","金冠","紫冠"],r=Math.ceil(t/5),i=(t-5*(r-1))%6;return t?i+" "+n[r]:""}})}(window.app),function(e,t){Object.extend(e.helper,{commentCreditToRank:function(e){var t=0;return e>=4&&e<=10?t=1:e>=11&&e<=40?t=2:e>=41&&e<=90?t=3:e>=91&&e<=150?t=4:e>=151&&e<=250?t=5:e>=251&&e<=500?t=6:e>=501&&e<=1e3?t=7:e>=1001&&e<=2e3?t=8:e>=2001&&e<=5e3?t=9:e>=5001&&e<=1e4?t=10:e>=10001&&e<=2e4?t=11:e>=20001&&e<=5e4?t=12:e>=50001&&e<=1e5?t=13:e>=100001&&e<=2e5?t=14:e>=200001&&e<=5e5?t=15:e>=500001&&e<=1e6?t=16:e>=1000001&&e<=2e6?t=17:e>=2000001&&e<=5e6?t=18:e>=5000001&&e<=1e7?t=19:e>=10000001&&(t=20),t},rank:function(e){var t=this.commentCreditToRank(e),n=["","颗心","颗黄钻","金冠","紫冠"],r=Math.ceil(t/5),i=(t-5*(r-1))%6;return t?i+" "+n[r]:""}})}(window.app),function(e,t){var n=e.page.define({name:"imaglet",title:'<div class="headerTab"><span class="h-tab">图文详情</span><span class="h-tab">产品参数</span></div>',route:"imaglet/(P<id>\\d+)",templates:JST["template/imaglet"],buttons:[{type:"back",text:"宝贝详情"}],events:{},_formatImg:function(t){var n="300x300",r=t.replace(/<img[^>]+taobao[^>]+jpg[^>]*>/ig,function(t){if(t.search(/\d+x\d+\.jpg/)>-1||t.match(/jpg/g).length>1)return t;var r=t.indexOf('"')+1,i=t.lastIndexOf('"'),s=t.slice(r,i);return t.slice(0,r)+e.Util.getWebpImg(s,n)+t.slice(i)});return r},ready:function(){var t=this,n=this.itemId=e.navigation.getParameter("id"),r=$(e.component.getActiveContent());r.html(this.templates()),this.el=r;var i=e.helper.fetchHost();this.url="http://a."+i+".taobao.com/ajax/desc_list.do",this.imgSize="300x300",this.isFirst=!0,this.cachePages=[],e.Util.Events.call(this,"#J-myGood",this.events),this.fetch(n)},imaget:function(e){var t=this;t.toSlide("imaget",3,function(){t.allRun();var n=r(".headers .imaget .main");if(t.isIF)t.imagetViewInstance=new c({el:"#imaget"}),t.imagetViewInstance.fetch(e),t.iItem=e,t.isIF=!1,t.isParamFirst=!0,n.on("click",function(i){i.preventDefault();var o=r(i.target);if(o.hasClass("highlight"))return;var u=n.find("a.highlight"),a="#J_";a+=o.attr("s"),curdiv=r(a);if(!curdiv.length)return;u.removeClass("highlight"),o.addClass("highlight"),r("#J_"+u.attr("s")).addClass("none"),curdiv.removeClass("none"),a=="#J_param"&&t.isParamFirst&&(t.imagetViewInstance.fetchParam(e),t.isParamFirst=null),s.sendPoint(a!="#J_param"?"picdetail#h#detail":"pddetail#h#detail")});else if(t.iItem!=e){t.imagetViewInstance&&t.imagetViewInstance.destroy(),t.isParamFirst=!0;var i=n.children()[0];i.className!="highlight"&&(i.className="highlight",n.children()[1].className=""),t.imagetViewInstance=new c({el:"#imaget"}),t.imagetViewInstance.fetch(e),t.iItem=e}else d.loadHide()}),t.calcelFullScreen()},unload:function(){},template:function(e){var t=this,n="";return n+='<section class="innercontent">\r\n	<div id="J_imagetCont">\r\n		<div id="J_imagetCont_ic" class="it-cont"></div>\r\n		<div id="J_icpage" class="c-pnav-con"></div>\r\n	</div>\r\n	<div id="J_param" class="it-param none">\r\n		<div id="J_paload" class="c-loading dc-load">\r\n			<span></span>\r\n		</div>\r\n	</div>\r\n</section>\r\n',n},format:function(t){var n=this.imgSize,r=t.replace(/<img[^>]+taobao[^>]+jpg[^>]*>/ig,function(t){if(t.search(/\d+x\d+\.jpg/)>-1||t.match(/jpg/g).length>1)return t;var r=t.indexOf('"')+1,i=t.lastIndexOf('"'),s=t.slice(r,i);return t.slice(0,r)+e.Util.getWebpImg(s,n)+t.slice(i)});return r},render:function(e){scrollTo(0,0),e=e||1;var t=this,n;t.cachePages[e-1]?n=t.cachePages[e-1]:(n=t.format(t.list[e-1]),t.cachePages[e-1]=n),t.isFirst&&(t.el.html(t.template()),t.contbar||(t.contbar=$("#J_imagetCont_ic")),t.isFirst=null),t.isFirst||t.contbar.html(n)},fetch:function(e){var t=this;$.ajax({url:t.url,dataType:"jsonp",data:{item_id:e},success:function(e){if(e&&e.pages&&e.pages.length){t.list=e.pages,t.images=t.images,t.render();if(!t.pageNav){var n=t.pageNav=new PageNav({id:"#J_icpage",index:1,pageCount:e.pages.length,disableHash:!0});n.$container.on("P:switchPage",function(e,n){t.render(n.index),n.type=="next"})}}else t.list=['<p class="itc-p">无图文详情</p>'],t.render()},error:function(){t.el.html('<p class="itc-p">'+message.errorMessage+"</p>")}})},fetchParam:function(e){this.paramInstance=new paramView({el:"#J_param"}),this.paramInstance.getData(e)},destroy:function(){this.paramInstance&&this.paramInstance.destroy(),this.pageNav&&this.pageNav.eventDetach(),this.el.html(""),this.el=null}})}(window.app);